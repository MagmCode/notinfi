!function(){"use strict";function t(t){return function(t){if(Array.isArray(t))return e(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,n){if(!t)return;if("string"==typeof t)return e(t,n);var o=Object.prototype.toString.call(t).slice(8,-1);"Object"===o&&t.constructor&&(o=t.constructor.name);if("Map"===o||"Set"===o)return Array.from(t);if("Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return e(t,n)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function i(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t}(self.webpackChunk_fuse_demo=self.webpackChunk_fuse_demo||[]).push([[4544],{94544:function(e,o,a){a.r(o),a.d(o,{ContactsModule:function(){return le}});var r,c=a(63423),s=a(51095),l=a(7539),u=a(72458),f=a(43220),g=a(1769),p=a(98295),d=a(76627),m=a(83166),h=a(33935),v=a(36063),x=a(12178),Z=a(82613),_=a(67441),b=a(23017),y=a(32789),k=a(11436),T=a(16738),A=a(7853),w=a(44466),q=a(37716),C=((r=function(){function t(){n(this,t)}return i(t,[{key:"canDeactivate",value:function(t,e,n,o){for(var i=o.root;i.firstChild;)i=i.firstChild;return!(o.url.includes("/contacts")&&!i.paramMap.get("id"))||t.closeDrawer().then(function(){return!0})}}]),t}()).\u0275fac=function(t){return new(t||r)},r.\u0275prov=q.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r),Q=a(40205),I=a(5304),J=a(26215),U=a(25917),F=a(93342),N=a(15257),B=a(88002),Y=a(43190),M=a(45435),O=a(91841),R=function(){var e=function(){function e(t){n(this,e),this._httpClient=t,this._contact=new J.X(null),this._contacts=new J.X(null),this._countries=new J.X(null),this._tags=new J.X(null)}return i(e,[{key:"contact$",get:function(){return this._contact.asObservable()}},{key:"contacts$",get:function(){return this._contacts.asObservable()}},{key:"countries$",get:function(){return this._countries.asObservable()}},{key:"tags$",get:function(){return this._tags.asObservable()}},{key:"getContacts",value:function(){var t=this;return this._httpClient.get("api/apps/contacts/all").pipe((0,F.b)(function(e){t._contacts.next(e)}))}},{key:"searchContacts",value:function(t){var e=this;return this._httpClient.get("api/apps/contacts/search",{params:{query:t}}).pipe((0,F.b)(function(t){e._contacts.next(t)}))}},{key:"getContactById",value:function(t){var e=this;return this._contacts.pipe((0,N.q)(1),(0,B.U)(function(n){var o=n.find(function(e){return e.id===t})||null;return e._contact.next(o),o}),(0,Y.w)(function(e){return e?(0,U.of)(e):(0,Q._)("Could not found contact with id of "+t+"!")}))}},{key:"createContact",value:function(){var e=this;return this.contacts$.pipe((0,N.q)(1),(0,Y.w)(function(n){return e._httpClient.post("api/apps/contacts/contact",{}).pipe((0,B.U)(function(o){return e._contacts.next([o].concat(t(n))),o}))}))}},{key:"updateContact",value:function(t,e){var n=this;return this.contacts$.pipe((0,N.q)(1),(0,Y.w)(function(o){return n._httpClient.patch("api/apps/contacts/contact",{id:t,contact:e}).pipe((0,B.U)(function(e){var i=o.findIndex(function(e){return e.id===t});return o[i]=e,n._contacts.next(o),e}),(0,Y.w)(function(e){return n.contact$.pipe((0,N.q)(1),(0,M.h)(function(e){return e&&e.id===t}),(0,F.b)(function(){return n._contact.next(e),e}))}))}))}},{key:"deleteContact",value:function(t){var e=this;return this.contacts$.pipe((0,N.q)(1),(0,Y.w)(function(n){return e._httpClient.delete("api/apps/contacts/contact",{params:{id:t}}).pipe((0,B.U)(function(o){var i=n.findIndex(function(e){return e.id===t});return n.splice(i,1),e._contacts.next(n),o}))}))}},{key:"getCountries",value:function(){var t=this;return this._httpClient.get("api/apps/contacts/countries").pipe((0,F.b)(function(e){t._countries.next(e)}))}},{key:"getTags",value:function(){var t=this;return this._httpClient.get("api/apps/contacts/tags").pipe((0,F.b)(function(e){t._tags.next(e)}))}},{key:"createTag",value:function(e){var n=this;return this.tags$.pipe((0,N.q)(1),(0,Y.w)(function(o){return n._httpClient.post("api/apps/contacts/tag",{tag:e}).pipe((0,B.U)(function(e){return n._tags.next([].concat(t(o),[e])),e}))}))}},{key:"updateTag",value:function(t,e){var n=this;return this.tags$.pipe((0,N.q)(1),(0,Y.w)(function(o){return n._httpClient.patch("api/apps/contacts/tag",{id:t,tag:e}).pipe((0,B.U)(function(e){var i=o.findIndex(function(e){return e.id===t});return o[i]=e,n._tags.next(o),e}))}))}},{key:"deleteTag",value:function(t){var e=this;return this.tags$.pipe((0,N.q)(1),(0,Y.w)(function(n){return e._httpClient.delete("api/apps/contacts/tag",{params:{id:t}}).pipe((0,B.U)(function(o){var i=n.findIndex(function(e){return e.id===t});return n.splice(i,1),e._tags.next(n),o}),(0,M.h)(function(t){return t}),(0,Y.w)(function(n){return e.contacts$.pipe((0,N.q)(1),(0,B.U)(function(e){return e.forEach(function(e){var n=e.tags.findIndex(function(e){return e===t});n>-1&&e.tags.splice(n,1)}),n}))}))}))}},{key:"uploadAvatar",value:function(t,e){var n=this;return this.contacts$.pipe((0,N.q)(1),(0,Y.w)(function(o){return n._httpClient.post("api/apps/contacts/avatar",{id:t,avatar:e},{headers:{"Content-Type":e.type}}).pipe((0,B.U)(function(e){var i=o.findIndex(function(e){return e.id===t});return o[i]=e,n._contacts.next(o),e}),(0,Y.w)(function(e){return n.contact$.pipe((0,N.q)(1),(0,M.h)(function(e){return e&&e.id===t}),(0,F.b)(function(){return n._contact.next(e),e}))}))}))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(q.LFG(O.eN))},e.\u0275prov=q.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),D=function(){var t=function(){function t(e){n(this,t),this._contactsService=e}return i(t,[{key:"resolve",value:function(t,e){return this._contactsService.getContacts()}}]),t}();return t.\u0275fac=function(e){return new(e||t)(q.LFG(R))},t.\u0275prov=q.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t}(),S=function(){var t=function(){function t(e,o){n(this,t),this._contactsService=e,this._router=o}return i(t,[{key:"resolve",value:function(t,e){var n=this;return this._contactsService.getContactById(t.paramMap.get("id")).pipe((0,I.K)(function(t){console.error(t);var o=e.url.split("/").slice(0,-1).join("/");return n._router.navigateByUrl(o),(0,Q._)(t)}))}}]),t}();return t.\u0275fac=function(e){return new(e||t)(q.LFG(R),q.LFG(c.F0))},t.\u0275prov=q.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t}(),E=function(){var t=function(){function t(e){n(this,t),this._contactsService=e}return i(t,[{key:"resolve",value:function(t,e){return this._contactsService.getCountries()}}]),t}();return t.\u0275fac=function(e){return new(e||t)(q.LFG(R))},t.\u0275prov=q.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t}(),L=function(){var t=function(){function t(e){n(this,t),this._contactsService=e}return i(t,[{key:"resolve",value:function(t,e){return this._contactsService.getTags()}}]),t}();return t.\u0275fac=function(e){return new(e||t)(q.LFG(R))},t.\u0275prov=q.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t}(),$=function(){var t=function t(){n(this,t)};return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=q.Xpm({type:t,selectors:[["contacts"]],decls:1,vars:0,template:function(t,e){1&t&&q._UZ(0,"router-outlet")},directives:[c.lC],encapsulation:2,changeDetection:0}),t}(),P=a(38583),j=a(3679),H=a(79765),z=a(22759),G=a(46782),K=a(91812),V=["matDrawer"];function X(t,e){if(1&t&&(q.ynx(0),q._uU(1),q.BQk()),2&t){var n=q.oxw();q.xp6(1),q.hij(" ",n.contactsCount," ")}}function W(t,e){if(1&t&&(q.ynx(0),q.TgZ(1,"div",26),q._uU(2),q.qZA(),q.BQk()),2&t){var n=q.oxw().$implicit;q.xp6(2),q.hij(" ",n.name.charAt(0)," ")}}function tt(t,e){if(1&t&&(q.ynx(0),q._UZ(1,"img",27),q.BQk()),2&t){var n=q.oxw().$implicit;q.xp6(1),q.Q6J("src",n.avatar,q.LSH)}}function et(t,e){if(1&t&&(q.ynx(0),q.TgZ(1,"div",28),q._uU(2),q.qZA(),q.BQk()),2&t){var n=q.oxw().$implicit;q.xp6(2),q.hij(" ",n.name.charAt(0)," ")}}var nt=function(t,e){return{"hover:bg-gray-100 dark:hover:bg-hover":t,"bg-primary-50 dark:bg-hover":e}},ot=function(t){return["./",t]};function it(t,e){if(1&t&&(q.ynx(0),q.YNc(1,W,3,1,"ng-container",9),q.TgZ(2,"a",21),q.TgZ(3,"div",22),q.YNc(4,tt,2,1,"ng-container",9),q.YNc(5,et,3,1,"ng-container",9),q.qZA(),q.TgZ(6,"div",23),q.TgZ(7,"div",24),q._uU(8),q.qZA(),q.TgZ(9,"div",25),q._uU(10),q.qZA(),q.qZA(),q.qZA(),q.BQk()),2&t){var n=e.$implicit,o=e.index,i=q.oxw(2).ngIf,a=q.oxw();q.xp6(1),q.Q6J("ngIf",0===o||n.name.charAt(0)!==i[o-1].name.charAt(0)),q.xp6(1),q.Q6J("ngClass",q.WLB(7,nt,!a.selectedContact||a.selectedContact.id!==n.id,a.selectedContact&&a.selectedContact.id===n.id))("routerLink",q.VKq(10,ot,n.id)),q.xp6(2),q.Q6J("ngIf",n.avatar),q.xp6(1),q.Q6J("ngIf",!n.avatar),q.xp6(3),q.Oqu(n.name),q.xp6(2),q.Oqu(n.title)}}function at(t,e){if(1&t&&(q.ynx(0),q.YNc(1,it,11,12,"ng-container",20),q.BQk()),2&t){var n=q.oxw().ngIf,o=q.oxw();q.xp6(1),q.Q6J("ngForOf",n)("ngForTrackBy",o.trackByFn)}}function rt(t,e){if(1&t&&(q.ynx(0),q.YNc(1,at,2,2,"ng-container",19),q.BQk()),2&t){var n=e.ngIf;q.oxw();var o=q.MAs(28);q.xp6(1),q.Q6J("ngIf",n.length)("ngIfElse",o)}}function ct(t,e){1&t&&(q.TgZ(0,"div",29),q._uU(1,"There are no contacts!"),q.qZA())}var st=function(){return{"=0":"No contacts","=1":"contact",other:"contacts"}},lt=function(){var t=function(){function t(e,o,i,a,r,c){n(this,t),this._activatedRoute=e,this._changeDetectorRef=o,this._contactsService=i,this._document=a,this._router=r,this._fuseMediaWatcherService=c,this.contactsCount=0,this.contactsTableColumns=["name","email","phoneNumber","job"],this.searchInputControl=new j.NI,this._unsubscribeAll=new H.xQ}return i(t,[{key:"ngOnInit",value:function(){var t=this;this.contacts$=this._contactsService.contacts$,this._contactsService.contacts$.pipe((0,G.R)(this._unsubscribeAll)).subscribe(function(e){t.contactsCount=e.length,t._changeDetectorRef.markForCheck()}),this._contactsService.contact$.pipe((0,G.R)(this._unsubscribeAll)).subscribe(function(e){t.selectedContact=e,t._changeDetectorRef.markForCheck()}),this._contactsService.countries$.pipe((0,G.R)(this._unsubscribeAll)).subscribe(function(e){t.countries=e,t._changeDetectorRef.markForCheck()}),this.searchInputControl.valueChanges.pipe((0,G.R)(this._unsubscribeAll),(0,Y.w)(function(e){return t._contactsService.searchContacts(e)})).subscribe(),this.matDrawer.openedChange.subscribe(function(e){e||(t.selectedContact=null,t._changeDetectorRef.markForCheck())}),this._fuseMediaWatcherService.onMediaChange$.pipe((0,G.R)(this._unsubscribeAll)).subscribe(function(e){var n=e.matchingAliases;t.drawerMode=n.includes("lg")?"side":"over",t._changeDetectorRef.markForCheck()}),(0,z.R)(this._document,"keydown").pipe((0,G.R)(this._unsubscribeAll),(0,M.h)(function(t){return(!0===t.ctrlKey||t.metaKey)&&"/"===t.key})).subscribe(function(){t.createContact()})}},{key:"ngOnDestroy",value:function(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}},{key:"onBackdropClicked",value:function(){this._router.navigate(["./"],{relativeTo:this._activatedRoute}),this._changeDetectorRef.markForCheck()}},{key:"createContact",value:function(){var t=this;this._contactsService.createContact().subscribe(function(e){t._router.navigate(["./",e.id],{relativeTo:t._activatedRoute}),t._changeDetectorRef.markForCheck()})}},{key:"trackByFn",value:function(t,e){return e.id||t}}]),t}();return t.\u0275fac=function(e){return new(e||t)(q.Y36(c.gz),q.Y36(q.sBO),q.Y36(R),q.Y36(P.K0),q.Y36(c.F0),q.Y36(K.T))},t.\u0275cmp=q.Xpm({type:t,selectors:[["contacts-list"]],viewQuery:function(t,e){var n;(1&t&&q.Gf(V,7),2&t)&&(q.iGM(n=q.CRH())&&(e.matDrawer=n.first))},decls:29,vars:19,consts:[[1,"absolute","inset-0","flex","flex-col","min-w-0","overflow-hidden"],[1,"flex-auto","h-full","bg-card","dark:bg-transparent",3,"backdropClick"],[1,"w-full","md:w-160","dark:bg-gray-900",3,"mode","opened","position","disableClose"],["matDrawer",""],[1,"flex","flex-col"],[1,"flex-auto"],[1,"flex","flex-col","sm:flex-row","md:flex-col","flex-auto","justify-between","py-8","px-6","md:px-8","border-b"],[1,"text-4xl","font-extrabold","tracking-tight","leading-none"],[1,"ml-0.5","font-medium","text-secondary"],[4,"ngIf"],[1,"flex","items-center","mt-4","sm:mt-0","md:mt-4"],[1,"fuse-mat-dense","fuse-mat-no-subscript","fuse-mat-rounded","w-full","min-w-50"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matInput","",3,"formControl","autocomplete","placeholder"],["mat-flat-button","",1,"ml-4",3,"color","click"],[3,"svgIcon"],[1,"ml-2","mr-1"],[1,"relative"],["noContacts",""],[4,"ngIf","ngIfElse"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"z-20","flex","items-center","px-6","py-4","md:px-8","cursor-pointer","border-b",3,"ngClass","routerLink"],[1,"flex","flex-0","items-center","justify-center","w-10","h-10","rounded-full","overflow-hidden"],[1,"min-w-0","ml-4"],[1,"font-medium","leading-5","truncate"],[1,"leading-5","truncate","text-secondary"],[1,"z-10","sticky","top-0","-mt-px","px-6","py-1","md:px-8","border-t","border-b","font-medium","uppercase","text-secondary","bg-gray-50","dark:bg-gray-900"],["alt","Contact avatar",1,"object-cover","w-full","h-full",3,"src"],[1,"flex","items-center","justify-center","w-full","h-full","rounded-full","text-lg","uppercase","bg-gray-200","text-gray-600","dark:bg-gray-700","dark:text-gray-200"],[1,"p-8","sm:p-16","border-t","text-4xl","font-semibold","tracking-tight","text-center"]],template:function(t,e){1&t&&(q.TgZ(0,"div",0),q.TgZ(1,"mat-drawer-container",1),q.NdJ("backdropClick",function(){return e.onBackdropClicked()}),q.TgZ(2,"mat-drawer",2,3),q._UZ(4,"router-outlet"),q.qZA(),q.TgZ(5,"mat-drawer-content",4),q.TgZ(6,"div",5),q.TgZ(7,"div",6),q.TgZ(8,"div"),q.TgZ(9,"div",7),q._uU(10,"Contacts"),q.qZA(),q.TgZ(11,"div",8),q.YNc(12,X,2,1,"ng-container",9),q._uU(13),q.ALo(14,"i18nPlural"),q.qZA(),q.qZA(),q.TgZ(15,"div",10),q.TgZ(16,"div",5),q.TgZ(17,"mat-form-field",11),q._UZ(18,"mat-icon",12),q._UZ(19,"input",13),q.qZA(),q.qZA(),q.TgZ(20,"button",14),q.NdJ("click",function(){return e.createContact()}),q._UZ(21,"mat-icon",15),q.TgZ(22,"span",16),q._uU(23,"Add"),q.qZA(),q.qZA(),q.qZA(),q.qZA(),q.TgZ(24,"div",17),q.YNc(25,rt,2,2,"ng-container",9),q.ALo(26,"async"),q.YNc(27,ct,2,0,"ng-template",null,18,q.W1O),q.qZA(),q.qZA(),q.qZA(),q.qZA(),q.qZA()),2&t&&(q.xp6(2),q.Q6J("mode",e.drawerMode)("opened",!1)("position","end")("disableClose",!0),q.xp6(10),q.Q6J("ngIf",e.contactsCount>0),q.xp6(1),q.hij(" ",q.xi3(14,13,e.contactsCount,q.DdM(18,st))," "),q.xp6(5),q.Q6J("svgIcon","heroicons_solid:search"),q.xp6(1),q.Q6J("formControl",e.searchInputControl)("autocomplete","off")("placeholder","Search contacts"),q.xp6(1),q.Q6J("color","primary"),q.xp6(1),q.Q6J("svgIcon","heroicons_outline:plus"),q.xp6(4),q.Q6J("ngIf",q.lcZ(26,16,e.contacts$)))},directives:[b.kh,b.jA,c.lC,b.LW,P.O5,p.KE,d.Hw,p.qo,m.Nt,j.Fj,j.JJ,j.oH,s.lW,P.sg,c.yS,P.mk],pipes:[P.Gx,P.Ov],encapsulation:2,changeDetection:0}),t}(),ut=a(87636),ft=a(54395),gt=a(1400),pt=a(58203),dt=a(3005),mt=["avatarFileInput"],ht=["tagsPanel"],vt=["tagsPanelOrigin"];function xt(t,e){if(1&t&&(q.ynx(0),q._UZ(1,"img",18),q.BQk()),2&t){var n=q.oxw(2);q.xp6(1),q.Q6J("src",n.contact.background,q.LSH)}}function Zt(t,e){if(1&t&&q._UZ(0,"img",19),2&t){var n=q.oxw(2);q.Q6J("src",n.contact.avatar,q.LSH)}}function _t(t,e){if(1&t&&(q.TgZ(0,"div",20),q._uU(1),q.qZA()),2&t){var n=q.oxw(2);q.xp6(1),q.hij(" ",n.contact.name.charAt(0)," ")}}function bt(t,e){if(1&t&&(q.ynx(0),q.TgZ(1,"div",23),q.TgZ(2,"span",24),q._uU(3),q.qZA(),q.qZA(),q.BQk()),2&t){var n=e.$implicit;q.xp6(3),q.Oqu(n.title)}}function yt(t,e){if(1&t&&(q.ynx(0),q.TgZ(1,"div",21),q.YNc(2,bt,4,1,"ng-container",22),q.ALo(3,"fuseFindByKey"),q.qZA(),q.BQk()),2&t){var n=q.oxw(2);q.xp6(2),q.Q6J("ngForOf",q.Dn7(3,2,n.contact.tags,"id",n.tags))("ngForTrackBy",n.trackByFn)}}function kt(t,e){if(1&t&&(q.ynx(0),q.TgZ(1,"div",25),q._UZ(2,"mat-icon",26),q.TgZ(3,"div",27),q._uU(4),q.qZA(),q.qZA(),q.BQk()),2&t){var n=q.oxw(2);q.xp6(2),q.Q6J("svgIcon","heroicons_outline:briefcase"),q.xp6(2),q.Oqu(n.contact.title)}}function Tt(t,e){if(1&t&&(q.ynx(0),q.TgZ(1,"div",25),q._UZ(2,"mat-icon",26),q.TgZ(3,"div",27),q._uU(4),q.qZA(),q.qZA(),q.BQk()),2&t){var n=q.oxw(2);q.xp6(2),q.Q6J("svgIcon","heroicons_outline:office-building"),q.xp6(2),q.Oqu(n.contact.company)}}function At(t,e){if(1&t&&(q.TgZ(0,"div",33),q.TgZ(1,"span",34),q._uU(2,"\u2022"),q.qZA(),q.TgZ(3,"span",35),q._uU(4),q.qZA(),q.qZA()),2&t){var n=q.oxw().$implicit;q.xp6(4),q.Oqu(n.label)}}function wt(t,e){if(1&t&&(q.ynx(0),q.TgZ(1,"div",30),q.TgZ(2,"a",31),q._uU(3),q.qZA(),q.YNc(4,At,5,1,"div",32),q.qZA(),q.BQk()),2&t){var n=e.$implicit;q.xp6(2),q.Q6J("href","mailto:"+n.email,q.LSH),q.xp6(1),q.hij(" ",n.email," "),q.xp6(1),q.Q6J("ngIf",n.label)}}function qt(t,e){if(1&t&&(q.ynx(0),q.TgZ(1,"div",28),q._UZ(2,"mat-icon",26),q.TgZ(3,"div",29),q.YNc(4,wt,5,3,"ng-container",22),q.qZA(),q.qZA(),q.BQk()),2&t){var n=q.oxw(2);q.xp6(2),q.Q6J("svgIcon","heroicons_outline:mail"),q.xp6(2),q.Q6J("ngForOf",n.contact.emails)("ngForTrackBy",n.trackByFn)}}function Ct(t,e){if(1&t&&(q.TgZ(0,"div",33),q.TgZ(1,"span",34),q._uU(2,"\u2022"),q.qZA(),q.TgZ(3,"span",35),q._uU(4),q.qZA(),q.qZA()),2&t){var n=q.oxw().$implicit;q.xp6(4),q.Oqu(n.label)}}function Qt(t,e){if(1&t&&(q.ynx(0),q.TgZ(1,"div",30),q._UZ(2,"div",36),q.TgZ(3,"div",37),q._uU(4),q.qZA(),q.TgZ(5,"div",38),q._uU(6),q.qZA(),q.YNc(7,Ct,5,1,"div",32),q.qZA(),q.BQk()),2&t){var n=e.$implicit,o=q.oxw(3);q.xp6(2),q.Udp("background","url('/assets/images/apps/contacts/flags.png') no-repeat 0 0")("background-size","24px 3876px")("background-position",o.getCountryByIso(n.country).flagImagePos),q.Q6J("matTooltip",o.getCountryByIso(n.country).name),q.xp6(2),q.Oqu(o.getCountryByIso(n.country).code),q.xp6(2),q.Oqu(n.phoneNumber),q.xp6(1),q.Q6J("ngIf",n.label)}}function It(t,e){if(1&t&&(q.ynx(0),q.TgZ(1,"div",28),q._UZ(2,"mat-icon",26),q.TgZ(3,"div",29),q.YNc(4,Qt,8,10,"ng-container",22),q.qZA(),q.qZA(),q.BQk()),2&t){var n=q.oxw(2);q.xp6(2),q.Q6J("svgIcon","heroicons_outline:phone"),q.xp6(2),q.Q6J("ngForOf",n.contact.phoneNumbers)("ngForTrackBy",n.trackByFn)}}function Jt(t,e){if(1&t&&(q.ynx(0),q.TgZ(1,"div",25),q._UZ(2,"mat-icon",26),q.TgZ(3,"div",27),q._uU(4),q.qZA(),q.qZA(),q.BQk()),2&t){var n=q.oxw(2);q.xp6(2),q.Q6J("svgIcon","heroicons_outline:location-marker"),q.xp6(2),q.Oqu(n.contact.address)}}function Ut(t,e){if(1&t&&(q.ynx(0),q.TgZ(1,"div",25),q._UZ(2,"mat-icon",26),q.TgZ(3,"div",27),q._uU(4),q.ALo(5,"date"),q.qZA(),q.qZA(),q.BQk()),2&t){var n=q.oxw(2);q.xp6(2),q.Q6J("svgIcon","heroicons_outline:cake"),q.xp6(2),q.Oqu(q.xi3(5,2,n.contact.birthday,"longDate"))}}function Ft(t,e){if(1&t&&(q.ynx(0),q.TgZ(1,"div",28),q._UZ(2,"mat-icon",26),q._UZ(3,"div",39),q.qZA(),q.BQk()),2&t){var n=q.oxw(2);q.xp6(2),q.Q6J("svgIcon","heroicons_outline:menu-alt-2"),q.xp6(1),q.Q6J("innerHTML",n.contact.notes,q.oJD)}}var Nt=function(){return["../"]};function Bt(t,e){if(1&t){var n=q.EpF();q.ynx(0),q.TgZ(1,"div",2),q.YNc(2,xt,2,1,"ng-container",1),q.TgZ(3,"div",3),q.TgZ(4,"button",4),q._UZ(5,"mat-icon",5),q.qZA(),q.qZA(),q.qZA(),q.TgZ(6,"div",6),q.TgZ(7,"div",7),q.TgZ(8,"div",8),q.TgZ(9,"div",9),q.YNc(10,Zt,1,1,"img",10),q.YNc(11,_t,2,1,"div",11),q.qZA(),q.TgZ(12,"div",12),q.TgZ(13,"button",13),q.NdJ("click",function(){return q.CHM(n),q.oxw().toggleEditMode(!0)}),q._UZ(14,"mat-icon",14),q.TgZ(15,"span",15),q._uU(16,"Edit"),q.qZA(),q.qZA(),q.qZA(),q.qZA(),q.TgZ(17,"div",16),q._uU(18),q.qZA(),q.YNc(19,yt,4,6,"ng-container",1),q.TgZ(20,"div",17),q.YNc(21,kt,5,2,"ng-container",1),q.YNc(22,Tt,5,2,"ng-container",1),q.YNc(23,qt,5,3,"ng-container",1),q.YNc(24,It,5,3,"ng-container",1),q.YNc(25,Jt,5,2,"ng-container",1),q.YNc(26,Ut,6,5,"ng-container",1),q.YNc(27,Ft,4,2,"ng-container",1),q.qZA(),q.qZA(),q.qZA(),q.BQk()}if(2&t){var o=q.oxw();q.xp6(2),q.Q6J("ngIf",o.contact.background),q.xp6(2),q.Q6J("matTooltip","Close")("routerLink",q.DdM(16,Nt)),q.xp6(1),q.Q6J("svgIcon","heroicons_outline:x"),q.xp6(5),q.Q6J("ngIf",o.contact.avatar),q.xp6(1),q.Q6J("ngIf",!o.contact.avatar),q.xp6(3),q.Q6J("svgIcon","heroicons_solid:pencil-alt"),q.xp6(4),q.Oqu(o.contact.name),q.xp6(1),q.Q6J("ngIf",o.contact.tags.length),q.xp6(2),q.Q6J("ngIf",o.contact.title),q.xp6(1),q.Q6J("ngIf",o.contact.company),q.xp6(1),q.Q6J("ngIf",o.contact.emails.length),q.xp6(1),q.Q6J("ngIf",o.contact.phoneNumbers.length),q.xp6(1),q.Q6J("ngIf",o.contact.address),q.xp6(1),q.Q6J("ngIf",o.contact.birthday),q.xp6(1),q.Q6J("ngIf",o.contact.notes)}}function Yt(t,e){if(1&t&&(q.ynx(0),q._UZ(1,"img",18),q.BQk()),2&t){var n=q.oxw(2);q.xp6(1),q.Q6J("src",n.contact.background,q.LSH)}}function Mt(t,e){if(1&t&&q._UZ(0,"img",19),2&t){var n=q.oxw(2);q.Q6J("src",n.contact.avatar,q.LSH)}}function Ot(t,e){if(1&t&&(q.TgZ(0,"div",20),q._uU(1),q.qZA()),2&t){var n=q.oxw(2);q.xp6(1),q.hij(" ",n.contact.name.charAt(0)," ")}}function Rt(t,e){if(1&t&&(q.ynx(0),q.TgZ(1,"div",70),q.TgZ(2,"span",71),q._uU(3),q.qZA(),q.qZA(),q.BQk()),2&t){var n=e.$implicit;q.xp6(3),q.Oqu(n.title)}}function Dt(t,e){if(1&t&&(q.ynx(0),q.YNc(1,Rt,4,1,"ng-container",22),q.ALo(2,"fuseFindByKey"),q.BQk()),2&t){var n=q.oxw(2);q.xp6(1),q.Q6J("ngForOf",q.Dn7(2,2,n.contact.tags,"id",n.tags))("ngForTrackBy",n.trackByFn)}}function St(t,e){1&t&&(q.ynx(0),q._UZ(1,"mat-icon",14),q.TgZ(2,"span",72),q._uU(3,"Edit"),q.qZA(),q.BQk()),2&t&&(q.xp6(1),q.Q6J("svgIcon","heroicons_solid:pencil-alt"))}function Et(t,e){1&t&&(q.ynx(0),q._UZ(1,"mat-icon",14),q.TgZ(2,"span",72),q._uU(3,"Add"),q.qZA(),q.BQk()),2&t&&(q.xp6(1),q.Q6J("svgIcon","heroicons_solid:plus-circle"))}function Lt(t,e){1&t&&q._UZ(0,"mat-icon",14),2&t&&q.Q6J("svgIcon","heroicons_solid:pencil-alt")}function $t(t,e){1&t&&q._UZ(0,"mat-icon",14),2&t&&q.Q6J("svgIcon","heroicons_solid:check")}function Pt(t,e){if(1&t){var n=q.EpF();q.ynx(0),q.TgZ(1,"div",82),q.NdJ("click",function(){var t=q.CHM(n).$implicit;return q.oxw(4).toggleContactTag(t)}),q._UZ(2,"mat-checkbox",83),q.TgZ(3,"div",84),q._uU(4),q.qZA(),q.qZA(),q.BQk()}if(2&t){var o=e.$implicit,i=q.oxw(4);q.xp6(2),q.Q6J("checked",i.contact.tags.includes(o.id))("color","primary")("disableRipple",!0),q.xp6(2),q.Oqu(o.title)}}function jt(t,e){if(1&t&&(q.ynx(0),q.YNc(1,Pt,5,4,"ng-container",22),q.BQk()),2&t){var n=q.oxw(3);q.xp6(1),q.Q6J("ngForOf",n.filteredTags)("ngForTrackBy",n.trackByFn)}}function Ht(t,e){if(1&t){var n=q.EpF();q.ynx(0),q.TgZ(1,"div",75),q.TgZ(2,"mat-form-field",86),q.TgZ(3,"input",87),q.NdJ("input",function(t){var e=q.CHM(n).$implicit;return q.oxw(4).updateTagTitle(e,t)}),q.qZA(),q.TgZ(4,"button",88),q.NdJ("click",function(){var t=q.CHM(n).$implicit;return q.oxw(4).deleteTag(t)}),q._UZ(5,"mat-icon",89),q.qZA(),q.qZA(),q.qZA(),q.BQk()}if(2&t){var o=e.$implicit;q.xp6(3),q.Q6J("value",o.title),q.xp6(2),q.Q6J("svgIcon","heroicons_solid:trash")}}function zt(t,e){if(1&t&&(q.ynx(0),q.TgZ(1,"div",85),q.YNc(2,Ht,6,2,"ng-container",22),q.qZA(),q.BQk()),2&t){var n=q.oxw(3);q.xp6(2),q.Q6J("ngForOf",n.filteredTags)("ngForTrackBy",n.trackByFn)}}function Gt(t,e){if(1&t){var n=q.EpF();q.TgZ(0,"div",90),q.NdJ("click",function(){q.CHM(n),q.oxw();var t=q.MAs(6);return q.oxw(2).createTag(t.value),t.value=""}),q._UZ(1,"mat-icon",91),q.TgZ(2,"div",92),q._uU(3,'Create "'),q.TgZ(4,"b"),q._uU(5),q.qZA(),q._uU(6,'"'),q.qZA(),q.qZA()}if(2&t){q.oxw();var o=q.MAs(6);q.xp6(1),q.Q6J("svgIcon","heroicons_solid:plus-circle"),q.xp6(4),q.Oqu(o.value)}}function Kt(t,e){if(1&t){var n=q.EpF();q.TgZ(0,"div",73),q.TgZ(1,"div",74),q.TgZ(2,"div",75),q._UZ(3,"mat-icon",14),q.TgZ(4,"div",15),q.TgZ(5,"input",76,77),q.NdJ("input",function(t){return q.CHM(n),q.oxw(2).filterTags(t)})("keydown",function(t){return q.CHM(n),q.oxw(2).filterTagsInputKeyDown(t)}),q.qZA(),q.qZA(),q.qZA(),q.TgZ(7,"button",78),q.NdJ("click",function(){return q.CHM(n),q.oxw(2).toggleTagsEditMode()}),q.YNc(8,Lt,1,1,"mat-icon",79),q.YNc(9,$t,1,1,"mat-icon",79),q.qZA(),q.qZA(),q.TgZ(10,"div",80),q.YNc(11,jt,2,2,"ng-container",1),q.YNc(12,zt,3,2,"ng-container",1),q.YNc(13,Gt,7,2,"div",81),q.qZA(),q.qZA()}if(2&t){var o=q.MAs(6),i=q.oxw(2);q.xp6(3),q.Q6J("svgIcon","heroicons_solid:search"),q.xp6(2),q.Q6J("maxLength",30),q.xp6(3),q.Q6J("ngIf",!i.tagsEditMode),q.xp6(1),q.Q6J("ngIf",i.tagsEditMode),q.xp6(2),q.Q6J("ngIf",!i.tagsEditMode),q.xp6(1),q.Q6J("ngIf",i.tagsEditMode),q.xp6(1),q.Q6J("ngIf",i.shouldShowCreateTagButton(o.value))}}function Vt(t,e){1&t&&(q.TgZ(0,"mat-label"),q._uU(1,"Email"),q.qZA())}function Xt(t,e){1&t&&(q.TgZ(0,"mat-label"),q._uU(1,"Label"),q.qZA())}var Wt=function(t){return{"mt-6":t}};function te(t,e){if(1&t){var n=q.EpF();q.ynx(0),q.TgZ(1,"div",97),q.TgZ(2,"button",98),q.NdJ("click",function(){q.CHM(n);var t=q.oxw().index;return q.oxw(2).removeEmailField(t)}),q._UZ(3,"mat-icon",14),q.qZA(),q.qZA(),q.BQk()}if(2&t){var o=q.oxw().first;q.xp6(1),q.Q6J("ngClass",q.VKq(2,Wt,o)),q.xp6(2),q.Q6J("svgIcon","heroicons_solid:trash")}}function ee(t,e){if(1&t&&(q.ynx(0),q.TgZ(1,"div",28),q.TgZ(2,"mat-form-field",93),q.YNc(3,Vt,2,0,"mat-label",1),q._UZ(4,"mat-icon",51),q._UZ(5,"input",94),q.qZA(),q.TgZ(6,"mat-form-field",95),q.YNc(7,Xt,2,0,"mat-label",1),q._UZ(8,"mat-icon",51),q._UZ(9,"input",96),q.qZA(),q.YNc(10,te,4,4,"ng-container",1),q.qZA(),q.BQk()),2&t){var n=e.$implicit,o=e.first,i=e.last;q.xp6(3),q.Q6J("ngIf",o),q.xp6(1),q.Q6J("svgIcon","heroicons_solid:mail"),q.xp6(1),q.Q6J("formControl",n.get("email"))("placeholder","Email address")("spellcheck",!1),q.xp6(2),q.Q6J("ngIf",o),q.xp6(1),q.Q6J("svgIcon","heroicons_solid:tag"),q.xp6(1),q.Q6J("formControl",n.get("label"))("placeholder","Label"),q.xp6(1),q.Q6J("ngIf",!(o&&i))}}function ne(t,e){1&t&&(q.TgZ(0,"mat-label"),q._uU(1,"Phone"),q.qZA())}function oe(t,e){if(1&t&&(q.ynx(0),q.TgZ(1,"mat-option",103),q.TgZ(2,"span",75),q._UZ(3,"span",104),q.TgZ(4,"span",15),q._uU(5),q.qZA(),q.TgZ(6,"span",105),q._uU(7),q.qZA(),q.qZA(),q.qZA(),q.BQk()),2&t){var n=e.$implicit;q.xp6(1),q.Q6J("value",n.iso),q.xp6(2),q.Udp("background","url('/assets/images/apps/contacts/flags.png') no-repeat 0 0")("background-size","24px 3876px")("background-position",n.flagImagePos),q.xp6(2),q.Oqu(n.name),q.xp6(2),q.Oqu(n.code)}}function ie(t,e){1&t&&(q.TgZ(0,"mat-label"),q._uU(1,"Label"),q.qZA())}function ae(t,e){if(1&t){var n=q.EpF();q.ynx(0),q.TgZ(1,"div",97),q.TgZ(2,"button",98),q.NdJ("click",function(){q.CHM(n);var t=q.oxw().index;return q.oxw(2).removePhoneNumberField(t)}),q._UZ(3,"mat-icon",14),q.qZA(),q.qZA(),q.BQk()}if(2&t){var o=q.oxw().first;q.xp6(1),q.Q6J("ngClass",q.VKq(2,Wt,o)),q.xp6(2),q.Q6J("svgIcon","heroicons_solid:trash")}}function re(t,e){if(1&t&&(q.ynx(0),q.TgZ(1,"div",99),q.TgZ(2,"mat-form-field",93),q.YNc(3,ne,2,0,"mat-label",1),q._UZ(4,"input",96),q.TgZ(5,"mat-select",100),q.TgZ(6,"mat-select-trigger"),q.TgZ(7,"span",75),q._UZ(8,"span",101),q.TgZ(9,"span",102),q._uU(10),q.qZA(),q.qZA(),q.qZA(),q.YNc(11,oe,8,9,"ng-container",22),q.qZA(),q.qZA(),q.TgZ(12,"mat-form-field",95),q.YNc(13,ie,2,0,"mat-label",1),q._UZ(14,"mat-icon",51),q._UZ(15,"input",96),q.qZA(),q.YNc(16,ae,4,4,"ng-container",1),q.qZA(),q.BQk()),2&t){var n=e.$implicit,o=e.first,i=e.last,a=q.oxw(2);q.xp6(3),q.Q6J("ngIf",o),q.xp6(1),q.Q6J("formControl",n.get("phoneNumber"))("placeholder","Phone"),q.xp6(1),q.Q6J("formControl",n.get("country")),q.xp6(3),q.Udp("background","url('/assets/images/apps/contacts/flags.png') no-repeat 0 0")("background-size","24px 3876px")("background-position",a.getCountryByIso(n.get("country").value).flagImagePos),q.xp6(2),q.Oqu(a.getCountryByIso(n.get("country").value).code),q.xp6(1),q.Q6J("ngForOf",a.countries)("ngForTrackBy",a.trackByFn),q.xp6(2),q.Q6J("ngIf",o),q.xp6(1),q.Q6J("svgIcon","heroicons_solid:tag"),q.xp6(1),q.Q6J("formControl",n.get("label"))("placeholder","Label"),q.xp6(1),q.Q6J("ngIf",!(o&&i))}}function ce(t,e){if(1&t){var n=q.EpF();q.ynx(0),q.TgZ(1,"div",2),q.YNc(2,Yt,2,1,"ng-container",1),q.TgZ(3,"div",3),q.TgZ(4,"button",4),q._UZ(5,"mat-icon",5),q.qZA(),q.qZA(),q.qZA(),q.TgZ(6,"div",40),q.TgZ(7,"div",7),q.TgZ(8,"form",41),q.TgZ(9,"div",8),q.TgZ(10,"div",42),q._UZ(11,"div",43),q.TgZ(12,"div",44),q.TgZ(13,"div"),q.TgZ(14,"input",45,46),q.NdJ("change",function(){q.CHM(n);var t=q.MAs(15);return q.oxw().uploadAvatar(t.files)}),q.qZA(),q.TgZ(16,"label",47),q._UZ(17,"mat-icon",5),q.qZA(),q.qZA(),q.TgZ(18,"div"),q.TgZ(19,"button",48),q.NdJ("click",function(){return q.CHM(n),q.oxw().removeAvatar()}),q._UZ(20,"mat-icon",5),q.qZA(),q.qZA(),q.qZA(),q.YNc(21,Mt,1,1,"img",10),q.YNc(22,Ot,2,1,"div",11),q.qZA(),q.qZA(),q.TgZ(23,"div",49),q.TgZ(24,"mat-form-field",50),q.TgZ(25,"mat-label"),q._uU(26,"Name"),q.qZA(),q._UZ(27,"mat-icon",51),q._UZ(28,"input",52),q.qZA(),q.qZA(),q.TgZ(29,"div",53),q.YNc(30,Dt,3,6,"ng-container",1),q.TgZ(31,"div",54,55),q.NdJ("click",function(){return q.CHM(n),q.oxw().openTagsPanel()}),q.YNc(33,St,4,1,"ng-container",1),q.YNc(34,Et,4,1,"ng-container",1),q.YNc(35,Kt,14,7,"ng-template",null,56,q.W1O),q.qZA(),q.qZA(),q.TgZ(37,"div",49),q.TgZ(38,"mat-form-field",50),q.TgZ(39,"mat-label"),q._uU(40,"Title"),q.qZA(),q._UZ(41,"mat-icon",51),q._UZ(42,"input",57),q.qZA(),q.qZA(),q.TgZ(43,"div",49),q.TgZ(44,"mat-form-field",50),q.TgZ(45,"mat-label"),q._uU(46,"Company"),q.qZA(),q._UZ(47,"mat-icon",51),q._UZ(48,"input",57),q.qZA(),q.qZA(),q.TgZ(49,"div",49),q.TgZ(50,"div",58),q.YNc(51,ee,11,10,"ng-container",22),q.qZA(),q.TgZ(52,"div",59),q.NdJ("click",function(){return q.CHM(n),q.oxw().addEmailField()}),q._UZ(53,"mat-icon",14),q.TgZ(54,"span",60),q._uU(55,"Add an email address"),q.qZA(),q.qZA(),q.qZA(),q.TgZ(56,"div",49),q.TgZ(57,"div",58),q.YNc(58,re,17,18,"ng-container",22),q.qZA(),q.TgZ(59,"div",59),q.NdJ("click",function(){return q.CHM(n),q.oxw().addPhoneNumberField()}),q._UZ(60,"mat-icon",14),q.TgZ(61,"span",60),q._uU(62,"Add a phone number"),q.qZA(),q.qZA(),q.qZA(),q.TgZ(63,"div",49),q.TgZ(64,"mat-form-field",50),q.TgZ(65,"mat-label"),q._uU(66,"Address"),q.qZA(),q._UZ(67,"mat-icon",51),q._UZ(68,"input",57),q.qZA(),q.qZA(),q.TgZ(69,"div",49),q.TgZ(70,"mat-form-field",50),q.TgZ(71,"mat-label"),q._uU(72,"Birthday"),q.qZA(),q._UZ(73,"mat-icon",51),q._UZ(74,"input",61),q._UZ(75,"mat-datepicker-toggle",62),q._UZ(76,"mat-datepicker",null,63),q.qZA(),q.qZA(),q.TgZ(78,"div",49),q.TgZ(79,"mat-form-field",64),q.TgZ(80,"mat-label"),q._uU(81,"Notes"),q.qZA(),q._UZ(82,"mat-icon",51),q._UZ(83,"textarea",65),q.qZA(),q.qZA(),q.TgZ(84,"div",66),q.TgZ(85,"button",67),q.NdJ("click",function(){return q.CHM(n),q.oxw().deleteContact()}),q._uU(86," Delete "),q.qZA(),q.TgZ(87,"button",68),q.NdJ("click",function(){return q.CHM(n),q.oxw().toggleEditMode(!1)}),q._uU(88," Cancel "),q.qZA(),q.TgZ(89,"button",69),q.NdJ("click",function(){return q.CHM(n),q.oxw().updateContact()}),q._uU(90," Save "),q.qZA(),q.qZA(),q.qZA(),q.qZA(),q.qZA(),q.BQk()}if(2&t){var o=q.MAs(77),i=q.oxw();q.xp6(2),q.Q6J("ngIf",i.contact.background),q.xp6(2),q.Q6J("matTooltip","Close")("routerLink",q.DdM(49,Nt)),q.xp6(1),q.Q6J("svgIcon","heroicons_outline:x"),q.xp6(3),q.Q6J("formGroup",i.contactForm),q.xp6(6),q.Q6J("multiple",!1)("accept","image/jpeg, image/png"),q.xp6(3),q.Q6J("svgIcon","heroicons_outline:camera"),q.xp6(3),q.Q6J("svgIcon","heroicons_outline:trash"),q.xp6(1),q.Q6J("ngIf",i.contact.avatar),q.xp6(1),q.Q6J("ngIf",!i.contact.avatar),q.xp6(5),q.Q6J("svgIcon","heroicons_solid:user-circle"),q.xp6(1),q.Q6J("formControlName","name")("placeholder","Name")("spellcheck",!1),q.xp6(2),q.Q6J("ngIf",i.contact.tags.length),q.xp6(3),q.Q6J("ngIf",i.contact.tags.length),q.xp6(1),q.Q6J("ngIf",!i.contact.tags.length),q.xp6(7),q.Q6J("svgIcon","heroicons_solid:briefcase"),q.xp6(1),q.Q6J("formControlName","title")("placeholder","Job title"),q.xp6(5),q.Q6J("svgIcon","heroicons_solid:office-building"),q.xp6(1),q.Q6J("formControlName","company")("placeholder","Company"),q.xp6(3),q.Q6J("ngForOf",i.contactForm.get("emails").controls)("ngForTrackBy",i.trackByFn),q.xp6(2),q.Q6J("svgIcon","heroicons_solid:plus-circle"),q.xp6(5),q.Q6J("ngForOf",i.contactForm.get("phoneNumbers").controls)("ngForTrackBy",i.trackByFn),q.xp6(2),q.Q6J("svgIcon","heroicons_solid:plus-circle"),q.xp6(7),q.Q6J("svgIcon","heroicons_solid:location-marker"),q.xp6(1),q.Q6J("formControlName","address")("placeholder","Address"),q.xp6(5),q.Q6J("svgIcon","heroicons_solid:cake"),q.xp6(1),q.Q6J("matDatepicker",o)("formControlName","birthday")("placeholder","Birthday"),q.xp6(1),q.Q6J("for",o),q.xp6(7),q.Q6J("svgIcon","heroicons_solid:menu-alt-2"),q.xp6(1),q.Q6J("formControlName","notes")("placeholder","Notes")("rows",5)("spellcheck",!1),q.xp6(2),q.Q6J("color","warn")("matTooltip","Delete"),q.xp6(2),q.Q6J("matTooltip","Cancel"),q.xp6(2),q.Q6J("color","primary")("disabled",i.contactForm.invalid)("matTooltip","Save")}}var se=[{path:"",component:$,resolve:{tags:L},children:[{path:"",component:lt,resolve:{tasks:D,countries:E},children:[{path:":id",component:function(){var t=function(){function t(e,o,i,a,r,c,s,l,u,f){n(this,t),this._activatedRoute=e,this._changeDetectorRef=o,this._contactsListComponent=i,this._contactsService=a,this._formBuilder=r,this._fuseConfirmationService=c,this._renderer2=s,this._router=l,this._overlay=u,this._viewContainerRef=f,this.editMode=!1,this.tagsEditMode=!1,this._unsubscribeAll=new H.xQ}return i(t,[{key:"ngOnInit",value:function(){var t=this;this._contactsListComponent.matDrawer.open(),this.contactForm=this._formBuilder.group({id:[""],avatar:[null],name:["",[j.kI.required]],emails:this._formBuilder.array([]),phoneNumbers:this._formBuilder.array([]),title:[""],company:[""],birthday:[null],address:[null],notes:[null],tags:[[]]}),this._contactsService.contacts$.pipe((0,G.R)(this._unsubscribeAll)).subscribe(function(e){t.contacts=e,t._changeDetectorRef.markForCheck()}),this._contactsService.contact$.pipe((0,G.R)(this._unsubscribeAll)).subscribe(function(e){t._contactsListComponent.matDrawer.open(),t.contact=e,t.contactForm.get("emails").clear(),t.contactForm.get("phoneNumbers").clear(),t.contactForm.patchValue(e);var n=[];e.emails.length>0?e.emails.forEach(function(e){n.push(t._formBuilder.group({email:[e.email],label:[e.label]}))}):n.push(t._formBuilder.group({email:[""],label:[""]})),n.forEach(function(e){t.contactForm.get("emails").push(e)});var o=[];e.phoneNumbers.length>0?e.phoneNumbers.forEach(function(e){o.push(t._formBuilder.group({country:[e.country],phoneNumber:[e.phoneNumber],label:[e.label]}))}):o.push(t._formBuilder.group({country:["us"],phoneNumber:[""],label:[""]})),o.forEach(function(e){t.contactForm.get("phoneNumbers").push(e)}),t.toggleEditMode(!1),t._changeDetectorRef.markForCheck()}),this._contactsService.countries$.pipe((0,G.R)(this._unsubscribeAll)).subscribe(function(e){t.countries=e,t._changeDetectorRef.markForCheck()}),this._contactsService.tags$.pipe((0,G.R)(this._unsubscribeAll)).subscribe(function(e){t.tags=e,t.filteredTags=e,t._changeDetectorRef.markForCheck()})}},{key:"ngOnDestroy",value:function(){this._unsubscribeAll.next(),this._unsubscribeAll.complete(),this._tagsPanelOverlayRef&&this._tagsPanelOverlayRef.dispose()}},{key:"closeDrawer",value:function(){return this._contactsListComponent.matDrawer.close()}},{key:"toggleEditMode",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.editMode=null===t?!this.editMode:t,this._changeDetectorRef.markForCheck()}},{key:"updateContact",value:function(){var t=this,e=this.contactForm.getRawValue();e.emails=e.emails.filter(function(t){return t.email}),e.phoneNumbers=e.phoneNumbers.filter(function(t){return t.phoneNumber}),this._contactsService.updateContact(e.id,e).subscribe(function(){t.toggleEditMode(!1)})}},{key:"deleteContact",value:function(){var t=this;this._fuseConfirmationService.open({title:"Delete contact",message:"Are you sure you want to delete this contact? This action cannot be undone!",actions:{confirm:{label:"Delete"}}}).afterClosed().subscribe(function(e){if("confirmed"===e){var n=t.contact.id,o=t.contacts.findIndex(function(t){return t.id===n}),i=o+(o===t.contacts.length-1?-1:1),a=1===t.contacts.length&&t.contacts[0].id===n?null:t.contacts[i].id;t._contactsService.deleteContact(n).subscribe(function(e){!e||(t._router.navigate(a?["../",a]:["../"],{relativeTo:t._activatedRoute}),t.toggleEditMode(!1))}),t._changeDetectorRef.markForCheck()}})}},{key:"uploadAvatar",value:function(t){if(t.length){var e=t[0];!["image/jpeg","image/png"].includes(e.type)||this._contactsService.uploadAvatar(this.contact.id,e).subscribe()}}},{key:"removeAvatar",value:function(){this.contactForm.get("avatar").setValue(null),this._avatarFileInput.nativeElement.value=null,this.contact.avatar=null}},{key:"openTagsPanel",value:function(){var t=this;this._tagsPanelOverlayRef=this._overlay.create({backdropClass:"",hasBackdrop:!0,scrollStrategy:this._overlay.scrollStrategies.block(),positionStrategy:this._overlay.position().flexibleConnectedTo(this._tagsPanelOrigin.nativeElement).withFlexibleDimensions(!0).withViewportMargin(64).withLockedPosition(!0).withPositions([{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"}])}),this._tagsPanelOverlayRef.attachments().subscribe(function(){t._renderer2.addClass(t._tagsPanelOrigin.nativeElement,"panel-opened"),t._tagsPanelOverlayRef.overlayElement.querySelector("input").focus()});var e=new ut.UE(this._tagsPanel,this._viewContainerRef);this._tagsPanelOverlayRef.attach(e),this._tagsPanelOverlayRef.backdropClick().subscribe(function(){t._renderer2.removeClass(t._tagsPanelOrigin.nativeElement,"panel-opened"),t._tagsPanelOverlayRef&&t._tagsPanelOverlayRef.hasAttached()&&(t._tagsPanelOverlayRef.detach(),t.filteredTags=t.tags,t.tagsEditMode=!1),e&&e.isAttached&&e.detach()})}},{key:"toggleTagsEditMode",value:function(){this.tagsEditMode=!this.tagsEditMode}},{key:"filterTags",value:function(t){var e=t.target.value.toLowerCase();this.filteredTags=this.tags.filter(function(t){return t.title.toLowerCase().includes(e)})}},{key:"filterTagsInputKeyDown",value:function(t){if("Enter"===t.key){if(0===this.filteredTags.length)return this.createTag(t.target.value),void(t.target.value="");var e=this.filteredTags[0];this.contact.tags.find(function(t){return t===e.id})?this.removeTagFromContact(e):this.addTagToContact(e)}}},{key:"createTag",value:function(t){var e=this;this._contactsService.createTag({title:t}).subscribe(function(t){e.addTagToContact(t)})}},{key:"updateTagTitle",value:function(t,e){t.title=e.target.value,this._contactsService.updateTag(t.id,t).pipe((0,ft.b)(300)).subscribe(),this._changeDetectorRef.markForCheck()}},{key:"deleteTag",value:function(t){this._contactsService.deleteTag(t.id).subscribe(),this._changeDetectorRef.markForCheck()}},{key:"addTagToContact",value:function(t){this.contact.tags.unshift(t.id),this.contactForm.get("tags").patchValue(this.contact.tags),this._changeDetectorRef.markForCheck()}},{key:"removeTagFromContact",value:function(t){this.contact.tags.splice(this.contact.tags.findIndex(function(e){return e===t.id}),1),this.contactForm.get("tags").patchValue(this.contact.tags),this._changeDetectorRef.markForCheck()}},{key:"toggleContactTag",value:function(t){this.contact.tags.includes(t.id)?this.removeTagFromContact(t):this.addTagToContact(t)}},{key:"shouldShowCreateTagButton",value:function(t){return!(""===t||this.tags.findIndex(function(e){return e.title.toLowerCase()===t.toLowerCase()})>-1)}},{key:"addEmailField",value:function(){var t=this._formBuilder.group({email:[""],label:[""]});this.contactForm.get("emails").push(t),this._changeDetectorRef.markForCheck()}},{key:"removeEmailField",value:function(t){this.contactForm.get("emails").removeAt(t),this._changeDetectorRef.markForCheck()}},{key:"addPhoneNumberField",value:function(){var t=this._formBuilder.group({country:["us"],phoneNumber:[""],label:[""]});this.contactForm.get("phoneNumbers").push(t),this._changeDetectorRef.markForCheck()}},{key:"removePhoneNumberField",value:function(t){this.contactForm.get("phoneNumbers").removeAt(t),this._changeDetectorRef.markForCheck()}},{key:"getCountryByIso",value:function(t){return this.countries.find(function(e){return e.iso===t})}},{key:"trackByFn",value:function(t,e){return e.id||t}}]),t}();return t.\u0275fac=function(e){return new(e||t)(q.Y36(c.gz),q.Y36(q.sBO),q.Y36(lt),q.Y36(R),q.Y36(j.qu),q.Y36(gt.R),q.Y36(q.Qsj),q.Y36(c.F0),q.Y36(pt.aV),q.Y36(q.s_b))},t.\u0275cmp=q.Xpm({type:t,selectors:[["contacts-details"]],viewQuery:function(t,e){var n;(1&t&&(q.Gf(mt,5),q.Gf(ht,5),q.Gf(vt,5)),2&t)&&(q.iGM(n=q.CRH())&&(e._avatarFileInput=n.first),q.iGM(n=q.CRH())&&(e._tagsPanel=n.first),q.iGM(n=q.CRH())&&(e._tagsPanelOrigin=n.first))},decls:3,vars:2,consts:[[1,"flex","flex-col","w-full"],[4,"ngIf"],[1,"relative","w-full","h-40","sm:h-48","px-8","sm:px-12","bg-accent-100","dark:bg-accent-700"],[1,"flex","items-center","justify-end","w-full","max-w-3xl","mx-auto","pt-6"],["mat-icon-button","",3,"matTooltip","routerLink"],[1,"text-white",3,"svgIcon"],[1,"relative","flex","flex-col","flex-auto","items-center","p-6","pt-0","sm:p-12","sm:pt-0"],[1,"w-full","max-w-3xl"],[1,"flex","flex-auto","items-end","-mt-16"],[1,"flex","items-center","justify-center","w-32","h-32","rounded-full","overflow-hidden","ring-4","ring-bg-card"],["class","object-cover w-full h-full",3,"src",4,"ngIf"],["class","flex items-center justify-center w-full h-full rounded overflow-hidden uppercase text-8xl font-bold leading-none bg-gray-200 text-gray-600 dark:bg-gray-700 dark:text-gray-200",4,"ngIf"],[1,"flex","items-center","ml-auto","mb-1"],["mat-stroked-button","",3,"click"],[1,"icon-size-5",3,"svgIcon"],[1,"ml-2"],[1,"mt-3","text-4xl","font-bold","truncate"],[1,"flex","flex-col","mt-4","pt-6","border-t","space-y-8"],[1,"absolute","inset-0","object-cover","w-full","h-full",3,"src"],[1,"object-cover","w-full","h-full",3,"src"],[1,"flex","items-center","justify-center","w-full","h-full","rounded","overflow-hidden","uppercase","text-8xl","font-bold","leading-none","bg-gray-200","text-gray-600","dark:bg-gray-700","dark:text-gray-200"],[1,"flex","flex-wrap","items-center","mt-2"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"flex","items-center","justify-center","py-1","px-3","mr-3","mb-3","rounded-full","leading-normal","text-gray-500","bg-gray-100","dark:text-gray-300","dark:bg-gray-700"],[1,"text-sm","font-medium","whitespace-nowrap"],[1,"flex","sm:items-center"],[3,"svgIcon"],[1,"ml-6","leading-6"],[1,"flex"],[1,"min-w-0","ml-6","space-y-1"],[1,"flex","items-center","leading-6"],["target","_blank",1,"hover:underline","text-primary-500",3,"href"],["class","text-md truncate text-secondary",4,"ngIf"],[1,"text-md","truncate","text-secondary"],[1,"mx-2"],[1,"font-medium"],[1,"hidden","sm:flex","w-6","h-4","overflow-hidden",3,"matTooltip"],[1,"sm:ml-3","font-mono"],[1,"ml-2.5","font-mono"],[1,"max-w-none","ml-6","prose","prose-sm",3,"innerHTML"],[1,"relative","flex","flex-col","flex-auto","items-center","px-6","sm:px-12"],[3,"formGroup"],[1,"relative","flex","items-center","justify-center","w-32","h-32","rounded-full","overflow-hidden","ring-4","ring-bg-card"],[1,"absolute","inset-0","bg-black","bg-opacity-50","z-10"],[1,"absolute","inset-0","flex","items-center","justify-center","z-20"],["id","avatar-file-input","type","file",1,"absolute","h-0","w-0","opacity-0","invisible","pointer-events-none",3,"multiple","accept","change"],["avatarFileInput",""],["for","avatar-file-input","matRipple","",1,"flex","items-center","justify-center","w-10","h-10","rounded-full","cursor-pointer","hover:bg-hover"],["mat-icon-button","",3,"click"],[1,"mt-8"],[1,"fuse-mat-no-subscript","w-full"],["matPrefix","",1,"hidden","sm:flex","icon-size-5",3,"svgIcon"],["matInput","",3,"formControlName","placeholder","spellcheck"],[1,"flex","flex-wrap","items-center","-m-1.5","mt-6"],[1,"flex","items-center","justify-center","px-4","m-1.5","rounded-full","leading-9","cursor-pointer","text-gray-500","bg-gray-100","dark:text-gray-300","dark:bg-gray-700",3,"click"],["tagsPanelOrigin",""],["tagsPanel",""],["matInput","",3,"formControlName","placeholder"],[1,"space-y-4"],[1,"group","inline-flex","items-center","mt-2","-ml-4","py-2","px-4","rounded","cursor-pointer",3,"click"],[1,"ml-2","font-medium","text-secondary","group-hover:underline"],["matInput","",3,"matDatepicker","formControlName","placeholder"],["matSuffix","",3,"for"],["birthdayDatepicker",""],[1,"fuse-mat-textarea","fuse-mat-no-subscript","w-full"],["matInput","","matTextareaAutosize","",3,"formControlName","placeholder","rows","spellcheck"],[1,"flex","items-center","mt-10","-mx-6","sm:-mx-12","py-4","pr-4","pl-1","sm:pr-12","sm:pl-7","border-t","bg-gray-50","dark:bg-transparent"],["mat-button","",3,"color","matTooltip","click"],["mat-button","",1,"ml-auto",3,"matTooltip","click"],["mat-flat-button","",1,"ml-2",3,"color","disabled","matTooltip","click"],[1,"flex","items-center","justify-center","px-4","m-1.5","rounded-full","leading-9","text-gray-500","bg-gray-100","dark:text-gray-300","dark:bg-gray-700"],[1,"text-md","font-medium","whitespace-nowrap"],[1,"ml-1.5","text-md","font-medium","whitespace-nowrap"],[1,"w-60","rounded","border","shadow-md","bg-card"],[1,"flex","items-center","m-3","mr-2"],[1,"flex","items-center"],["type","text","placeholder","Enter tag name",1,"w-full","min-w-0","py-1","border-0",3,"maxLength","input","keydown"],["newTagInput",""],["mat-icon-button","",1,"ml-1",3,"click"],["class","icon-size-5",3,"svgIcon",4,"ngIf"],[1,"flex","flex-col","max-h-64","py-2","border-t","overflow-y-auto"],["class","flex items-center h-10 min-h-10 -ml-0.5 pl-4 pr-3 leading-none cursor-pointer hover:bg-hover","matRipple","",3,"click",4,"ngIf"],["matRipple","",1,"flex","items-center","h-10","min-h-10","px-4","cursor-pointer","hover:bg-hover",3,"click"],[1,"flex","items-center","h-10","min-h-10","pointer-events-none",3,"checked","color","disableRipple"],[1,"ml-1"],[1,"py-2","space-y-2"],[1,"fuse-mat-dense","fuse-mat-no-subscript","w-full","mx-4"],["matInput","",3,"value","input"],["mat-icon-button","","matSuffix","",3,"click"],[1,"icon-size-5","ml-2",3,"svgIcon"],["matRipple","",1,"flex","items-center","h-10","min-h-10","-ml-0.5","pl-4","pr-3","leading-none","cursor-pointer","hover:bg-hover",3,"click"],[1,"mr-2","icon-size-5",3,"svgIcon"],[1,"break-all"],[1,"fuse-mat-no-subscript","flex-auto"],["matInput","",3,"formControl","placeholder","spellcheck"],[1,"fuse-mat-no-subscript","flex-auto","w-full","max-w-24","sm:max-w-40","ml-2","sm:ml-4"],["matInput","",3,"formControl","placeholder"],[1,"flex","items-center","w-10","pl-2",3,"ngClass"],["mat-icon-button","","matTooltip","Remove",1,"w-8","h-8","min-h-8",3,"click"],[1,"relative","flex"],["matPrefix","",1,"mr-1.5",3,"formControl"],[1,"hidden","sm:flex","w-6","h-4","mr-1","overflow-hidden"],[1,"sm:mx-0.5","font-medium","text-default"],[3,"value"],[1,"w-6","h-4","overflow-hidden"],[1,"ml-2","font-medium"]],template:function(t,e){1&t&&(q.TgZ(0,"div",0),q.YNc(1,Bt,28,17,"ng-container",1),q.YNc(2,ce,91,50,"ng-container",1),q.qZA()),2&t&&(q.xp6(1),q.Q6J("ngIf",!e.editMode),q.xp6(1),q.Q6J("ngIf",e.editMode))},directives:[P.O5,s.lW,k.gM,c.rH,d.Hw,P.sg,j._Y,j.JL,j.sg,u.wG,p.KE,p.hX,p.qo,m.Nt,j.Fj,j.JJ,j.u,f.hl,f.nW,p.R9,f.Mq,m.D7,l.oG,j.oH,P.mk,_.gD,_.$L,u.ey],pipes:[dt.K,P.uU],encapsulation:2,changeDetection:0}),t}(),resolve:{task:S,countries:E},canDeactivate:[C]}]}]}],le=function(){var t=function t(){n(this,t)};return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=q.oAB({type:t}),t.\u0275inj=q.cJS({providers:[{provide:u.sG,useValue:{parse:{dateInput:T.ISO_8601},display:{dateInput:"LL",monthYearLabel:"MMM YYYY",dateA11yLabel:"LL",monthYearA11yLabel:"MMMM YYYY"}}}],imports:[[c.Bz.forChild(se),s.ot,l.p9,f.FA,g.t,p.lN,d.Ps,m.c,h.Tx,v.Yd,x.Cv,Z.Fk,u.si,_.LD,b.SJ,y.p0,k.AV,A.V,w.m]]}),t}()}}])}();