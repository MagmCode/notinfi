"use strict";(self.webpackChunk_fuse_demo=self.webpackChunk_fuse_demo||[]).push([[4544],{94544:function(t,e,n){n.r(e),n.d(e,{ContactsModule:function(){return ce}});var o=n(63423),i=n(51095),c=n(7539),a=n(72458),r=n(43220),s=n(1769),l=n(98295),u=n(76627),g=n(83166),p=n(33935),d=n(36063),m=n(12178),f=n(82613),h=n(67441),x=n(23017),Z=n(32789),v=n(11436),_=n(16738),b=n(7853),T=n(44466),y=n(37716);let k=(()=>{class t{canDeactivate(t,e,n,o){let i=o.root;for(;i.firstChild;)i=i.firstChild;return!(o.url.includes("/contacts")&&!i.paramMap.get("id"))||t.closeDrawer().then(()=>!0)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=y.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var A=n(40205),w=n(5304),q=n(26215),C=n(25917),Q=n(93342),J=n(15257),I=n(88002),U=n(43190),F=n(45435),N=n(91841);let B=(()=>{class t{constructor(t){this._httpClient=t,this._contact=new q.X(null),this._contacts=new q.X(null),this._countries=new q.X(null),this._tags=new q.X(null)}get contact$(){return this._contact.asObservable()}get contacts$(){return this._contacts.asObservable()}get countries$(){return this._countries.asObservable()}get tags$(){return this._tags.asObservable()}getContacts(){return this._httpClient.get("api/apps/contacts/all").pipe((0,Q.b)(t=>{this._contacts.next(t)}))}searchContacts(t){return this._httpClient.get("api/apps/contacts/search",{params:{query:t}}).pipe((0,Q.b)(t=>{this._contacts.next(t)}))}getContactById(t){return this._contacts.pipe((0,J.q)(1),(0,I.U)(e=>{const n=e.find(e=>e.id===t)||null;return this._contact.next(n),n}),(0,U.w)(e=>e?(0,C.of)(e):(0,A._)("Could not found contact with id of "+t+"!")))}createContact(){return this.contacts$.pipe((0,J.q)(1),(0,U.w)(t=>this._httpClient.post("api/apps/contacts/contact",{}).pipe((0,I.U)(e=>(this._contacts.next([e,...t]),e)))))}updateContact(t,e){return this.contacts$.pipe((0,J.q)(1),(0,U.w)(n=>this._httpClient.patch("api/apps/contacts/contact",{id:t,contact:e}).pipe((0,I.U)(e=>{const o=n.findIndex(e=>e.id===t);return n[o]=e,this._contacts.next(n),e}),(0,U.w)(e=>this.contact$.pipe((0,J.q)(1),(0,F.h)(e=>e&&e.id===t),(0,Q.b)(()=>(this._contact.next(e),e)))))))}deleteContact(t){return this.contacts$.pipe((0,J.q)(1),(0,U.w)(e=>this._httpClient.delete("api/apps/contacts/contact",{params:{id:t}}).pipe((0,I.U)(n=>{const o=e.findIndex(e=>e.id===t);return e.splice(o,1),this._contacts.next(e),n}))))}getCountries(){return this._httpClient.get("api/apps/contacts/countries").pipe((0,Q.b)(t=>{this._countries.next(t)}))}getTags(){return this._httpClient.get("api/apps/contacts/tags").pipe((0,Q.b)(t=>{this._tags.next(t)}))}createTag(t){return this.tags$.pipe((0,J.q)(1),(0,U.w)(e=>this._httpClient.post("api/apps/contacts/tag",{tag:t}).pipe((0,I.U)(t=>(this._tags.next([...e,t]),t)))))}updateTag(t,e){return this.tags$.pipe((0,J.q)(1),(0,U.w)(n=>this._httpClient.patch("api/apps/contacts/tag",{id:t,tag:e}).pipe((0,I.U)(e=>{const o=n.findIndex(e=>e.id===t);return n[o]=e,this._tags.next(n),e}))))}deleteTag(t){return this.tags$.pipe((0,J.q)(1),(0,U.w)(e=>this._httpClient.delete("api/apps/contacts/tag",{params:{id:t}}).pipe((0,I.U)(n=>{const o=e.findIndex(e=>e.id===t);return e.splice(o,1),this._tags.next(e),n}),(0,F.h)(t=>t),(0,U.w)(e=>this.contacts$.pipe((0,J.q)(1),(0,I.U)(n=>(n.forEach(e=>{const n=e.tags.findIndex(e=>e===t);n>-1&&e.tags.splice(n,1)}),e)))))))}uploadAvatar(t,e){return this.contacts$.pipe((0,J.q)(1),(0,U.w)(n=>this._httpClient.post("api/apps/contacts/avatar",{id:t,avatar:e},{headers:{"Content-Type":e.type}}).pipe((0,I.U)(e=>{const o=n.findIndex(e=>e.id===t);return n[o]=e,this._contacts.next(n),e}),(0,U.w)(e=>this.contact$.pipe((0,J.q)(1),(0,F.h)(e=>e&&e.id===t),(0,Q.b)(()=>(this._contact.next(e),e)))))))}}return t.\u0275fac=function(e){return new(e||t)(y.LFG(N.eN))},t.\u0275prov=y.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Y=(()=>{class t{constructor(t){this._contactsService=t}resolve(t,e){return this._contactsService.getContacts()}}return t.\u0275fac=function(e){return new(e||t)(y.LFG(B))},t.\u0275prov=y.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),M=(()=>{class t{constructor(t,e){this._contactsService=t,this._router=e}resolve(t,e){return this._contactsService.getContactById(t.paramMap.get("id")).pipe((0,w.K)(t=>{console.error(t);const n=e.url.split("/").slice(0,-1).join("/");return this._router.navigateByUrl(n),(0,A._)(t)}))}}return t.\u0275fac=function(e){return new(e||t)(y.LFG(B),y.LFG(o.F0))},t.\u0275prov=y.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),R=(()=>{class t{constructor(t){this._contactsService=t}resolve(t,e){return this._contactsService.getCountries()}}return t.\u0275fac=function(e){return new(e||t)(y.LFG(B))},t.\u0275prov=y.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),O=(()=>{class t{constructor(t){this._contactsService=t}resolve(t,e){return this._contactsService.getTags()}}return t.\u0275fac=function(e){return new(e||t)(y.LFG(B))},t.\u0275prov=y.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),D=(()=>{class t{constructor(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=y.Xpm({type:t,selectors:[["contacts"]],decls:1,vars:0,template:function(t,e){1&t&&y._UZ(0,"router-outlet")},directives:[o.lC],encapsulation:2,changeDetection:0}),t})();var L=n(38583),S=n(3679),E=n(79765),$=n(22759),P=n(46782),H=n(91812);const j=["matDrawer"];function z(t,e){if(1&t&&(y.ynx(0),y._uU(1),y.BQk()),2&t){const t=y.oxw();y.xp6(1),y.hij(" ",t.contactsCount," ")}}function G(t,e){if(1&t&&(y.ynx(0),y.TgZ(1,"div",26),y._uU(2),y.qZA(),y.BQk()),2&t){const t=y.oxw().$implicit;y.xp6(2),y.hij(" ",t.name.charAt(0)," ")}}function K(t,e){if(1&t&&(y.ynx(0),y._UZ(1,"img",27),y.BQk()),2&t){const t=y.oxw().$implicit;y.xp6(1),y.Q6J("src",t.avatar,y.LSH)}}function V(t,e){if(1&t&&(y.ynx(0),y.TgZ(1,"div",28),y._uU(2),y.qZA(),y.BQk()),2&t){const t=y.oxw().$implicit;y.xp6(2),y.hij(" ",t.name.charAt(0)," ")}}const X=function(t,e){return{"hover:bg-gray-100 dark:hover:bg-hover":t,"bg-primary-50 dark:bg-hover":e}},W=function(t){return["./",t]};function tt(t,e){if(1&t&&(y.ynx(0),y.YNc(1,G,3,1,"ng-container",9),y.TgZ(2,"a",21),y.TgZ(3,"div",22),y.YNc(4,K,2,1,"ng-container",9),y.YNc(5,V,3,1,"ng-container",9),y.qZA(),y.TgZ(6,"div",23),y.TgZ(7,"div",24),y._uU(8),y.qZA(),y.TgZ(9,"div",25),y._uU(10),y.qZA(),y.qZA(),y.qZA(),y.BQk()),2&t){const t=e.$implicit,n=e.index,o=y.oxw(2).ngIf,i=y.oxw();y.xp6(1),y.Q6J("ngIf",0===n||t.name.charAt(0)!==o[n-1].name.charAt(0)),y.xp6(1),y.Q6J("ngClass",y.WLB(7,X,!i.selectedContact||i.selectedContact.id!==t.id,i.selectedContact&&i.selectedContact.id===t.id))("routerLink",y.VKq(10,W,t.id)),y.xp6(2),y.Q6J("ngIf",t.avatar),y.xp6(1),y.Q6J("ngIf",!t.avatar),y.xp6(3),y.Oqu(t.name),y.xp6(2),y.Oqu(t.title)}}function et(t,e){if(1&t&&(y.ynx(0),y.YNc(1,tt,11,12,"ng-container",20),y.BQk()),2&t){const t=y.oxw().ngIf,e=y.oxw();y.xp6(1),y.Q6J("ngForOf",t)("ngForTrackBy",e.trackByFn)}}function nt(t,e){if(1&t&&(y.ynx(0),y.YNc(1,et,2,2,"ng-container",19),y.BQk()),2&t){const t=e.ngIf;y.oxw();const n=y.MAs(28);y.xp6(1),y.Q6J("ngIf",t.length)("ngIfElse",n)}}function ot(t,e){1&t&&(y.TgZ(0,"div",29),y._uU(1,"There are no contacts!"),y.qZA())}const it=function(){return{"=0":"No contacts","=1":"contact",other:"contacts"}};let ct=(()=>{class t{constructor(t,e,n,o,i,c){this._activatedRoute=t,this._changeDetectorRef=e,this._contactsService=n,this._document=o,this._router=i,this._fuseMediaWatcherService=c,this.contactsCount=0,this.contactsTableColumns=["name","email","phoneNumber","job"],this.searchInputControl=new S.NI,this._unsubscribeAll=new E.xQ}ngOnInit(){this.contacts$=this._contactsService.contacts$,this._contactsService.contacts$.pipe((0,P.R)(this._unsubscribeAll)).subscribe(t=>{this.contactsCount=t.length,this._changeDetectorRef.markForCheck()}),this._contactsService.contact$.pipe((0,P.R)(this._unsubscribeAll)).subscribe(t=>{this.selectedContact=t,this._changeDetectorRef.markForCheck()}),this._contactsService.countries$.pipe((0,P.R)(this._unsubscribeAll)).subscribe(t=>{this.countries=t,this._changeDetectorRef.markForCheck()}),this.searchInputControl.valueChanges.pipe((0,P.R)(this._unsubscribeAll),(0,U.w)(t=>this._contactsService.searchContacts(t))).subscribe(),this.matDrawer.openedChange.subscribe(t=>{t||(this.selectedContact=null,this._changeDetectorRef.markForCheck())}),this._fuseMediaWatcherService.onMediaChange$.pipe((0,P.R)(this._unsubscribeAll)).subscribe(({matchingAliases:t})=>{this.drawerMode=t.includes("lg")?"side":"over",this._changeDetectorRef.markForCheck()}),(0,$.R)(this._document,"keydown").pipe((0,P.R)(this._unsubscribeAll),(0,F.h)(t=>(!0===t.ctrlKey||t.metaKey)&&"/"===t.key)).subscribe(()=>{this.createContact()})}ngOnDestroy(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}onBackdropClicked(){this._router.navigate(["./"],{relativeTo:this._activatedRoute}),this._changeDetectorRef.markForCheck()}createContact(){this._contactsService.createContact().subscribe(t=>{this._router.navigate(["./",t.id],{relativeTo:this._activatedRoute}),this._changeDetectorRef.markForCheck()})}trackByFn(t,e){return e.id||t}}return t.\u0275fac=function(e){return new(e||t)(y.Y36(o.gz),y.Y36(y.sBO),y.Y36(B),y.Y36(L.K0),y.Y36(o.F0),y.Y36(H.T))},t.\u0275cmp=y.Xpm({type:t,selectors:[["contacts-list"]],viewQuery:function(t,e){if(1&t&&y.Gf(j,7),2&t){let t;y.iGM(t=y.CRH())&&(e.matDrawer=t.first)}},decls:29,vars:19,consts:[[1,"absolute","inset-0","flex","flex-col","min-w-0","overflow-hidden"],[1,"flex-auto","h-full","bg-card","dark:bg-transparent",3,"backdropClick"],[1,"w-full","md:w-160","dark:bg-gray-900",3,"mode","opened","position","disableClose"],["matDrawer",""],[1,"flex","flex-col"],[1,"flex-auto"],[1,"flex","flex-col","sm:flex-row","md:flex-col","flex-auto","justify-between","py-8","px-6","md:px-8","border-b"],[1,"text-4xl","font-extrabold","tracking-tight","leading-none"],[1,"ml-0.5","font-medium","text-secondary"],[4,"ngIf"],[1,"flex","items-center","mt-4","sm:mt-0","md:mt-4"],[1,"fuse-mat-dense","fuse-mat-no-subscript","fuse-mat-rounded","w-full","min-w-50"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matInput","",3,"formControl","autocomplete","placeholder"],["mat-flat-button","",1,"ml-4",3,"color","click"],[3,"svgIcon"],[1,"ml-2","mr-1"],[1,"relative"],["noContacts",""],[4,"ngIf","ngIfElse"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"z-20","flex","items-center","px-6","py-4","md:px-8","cursor-pointer","border-b",3,"ngClass","routerLink"],[1,"flex","flex-0","items-center","justify-center","w-10","h-10","rounded-full","overflow-hidden"],[1,"min-w-0","ml-4"],[1,"font-medium","leading-5","truncate"],[1,"leading-5","truncate","text-secondary"],[1,"z-10","sticky","top-0","-mt-px","px-6","py-1","md:px-8","border-t","border-b","font-medium","uppercase","text-secondary","bg-gray-50","dark:bg-gray-900"],["alt","Contact avatar",1,"object-cover","w-full","h-full",3,"src"],[1,"flex","items-center","justify-center","w-full","h-full","rounded-full","text-lg","uppercase","bg-gray-200","text-gray-600","dark:bg-gray-700","dark:text-gray-200"],[1,"p-8","sm:p-16","border-t","text-4xl","font-semibold","tracking-tight","text-center"]],template:function(t,e){1&t&&(y.TgZ(0,"div",0),y.TgZ(1,"mat-drawer-container",1),y.NdJ("backdropClick",function(){return e.onBackdropClicked()}),y.TgZ(2,"mat-drawer",2,3),y._UZ(4,"router-outlet"),y.qZA(),y.TgZ(5,"mat-drawer-content",4),y.TgZ(6,"div",5),y.TgZ(7,"div",6),y.TgZ(8,"div"),y.TgZ(9,"div",7),y._uU(10,"Contacts"),y.qZA(),y.TgZ(11,"div",8),y.YNc(12,z,2,1,"ng-container",9),y._uU(13),y.ALo(14,"i18nPlural"),y.qZA(),y.qZA(),y.TgZ(15,"div",10),y.TgZ(16,"div",5),y.TgZ(17,"mat-form-field",11),y._UZ(18,"mat-icon",12),y._UZ(19,"input",13),y.qZA(),y.qZA(),y.TgZ(20,"button",14),y.NdJ("click",function(){return e.createContact()}),y._UZ(21,"mat-icon",15),y.TgZ(22,"span",16),y._uU(23,"Add"),y.qZA(),y.qZA(),y.qZA(),y.qZA(),y.TgZ(24,"div",17),y.YNc(25,nt,2,2,"ng-container",9),y.ALo(26,"async"),y.YNc(27,ot,2,0,"ng-template",null,18,y.W1O),y.qZA(),y.qZA(),y.qZA(),y.qZA(),y.qZA()),2&t&&(y.xp6(2),y.Q6J("mode",e.drawerMode)("opened",!1)("position","end")("disableClose",!0),y.xp6(10),y.Q6J("ngIf",e.contactsCount>0),y.xp6(1),y.hij(" ",y.xi3(14,13,e.contactsCount,y.DdM(18,it))," "),y.xp6(5),y.Q6J("svgIcon","heroicons_solid:search"),y.xp6(1),y.Q6J("formControl",e.searchInputControl)("autocomplete","off")("placeholder","Search contacts"),y.xp6(1),y.Q6J("color","primary"),y.xp6(1),y.Q6J("svgIcon","heroicons_outline:plus"),y.xp6(4),y.Q6J("ngIf",y.lcZ(26,16,e.contacts$)))},directives:[x.kh,x.jA,o.lC,x.LW,L.O5,l.KE,u.Hw,l.qo,g.Nt,S.Fj,S.JJ,S.oH,i.lW,L.sg,o.yS,L.mk],pipes:[L.Gx,L.Ov],encapsulation:2,changeDetection:0}),t})();var at=n(87636),rt=n(54395),st=n(1400),lt=n(58203),ut=n(3005);const gt=["avatarFileInput"],pt=["tagsPanel"],dt=["tagsPanelOrigin"];function mt(t,e){if(1&t&&(y.ynx(0),y._UZ(1,"img",18),y.BQk()),2&t){const t=y.oxw(2);y.xp6(1),y.Q6J("src",t.contact.background,y.LSH)}}function ft(t,e){if(1&t&&y._UZ(0,"img",19),2&t){const t=y.oxw(2);y.Q6J("src",t.contact.avatar,y.LSH)}}function ht(t,e){if(1&t&&(y.TgZ(0,"div",20),y._uU(1),y.qZA()),2&t){const t=y.oxw(2);y.xp6(1),y.hij(" ",t.contact.name.charAt(0)," ")}}function xt(t,e){if(1&t&&(y.ynx(0),y.TgZ(1,"div",23),y.TgZ(2,"span",24),y._uU(3),y.qZA(),y.qZA(),y.BQk()),2&t){const t=e.$implicit;y.xp6(3),y.Oqu(t.title)}}function Zt(t,e){if(1&t&&(y.ynx(0),y.TgZ(1,"div",21),y.YNc(2,xt,4,1,"ng-container",22),y.ALo(3,"fuseFindByKey"),y.qZA(),y.BQk()),2&t){const t=y.oxw(2);y.xp6(2),y.Q6J("ngForOf",y.Dn7(3,2,t.contact.tags,"id",t.tags))("ngForTrackBy",t.trackByFn)}}function vt(t,e){if(1&t&&(y.ynx(0),y.TgZ(1,"div",25),y._UZ(2,"mat-icon",26),y.TgZ(3,"div",27),y._uU(4),y.qZA(),y.qZA(),y.BQk()),2&t){const t=y.oxw(2);y.xp6(2),y.Q6J("svgIcon","heroicons_outline:briefcase"),y.xp6(2),y.Oqu(t.contact.title)}}function _t(t,e){if(1&t&&(y.ynx(0),y.TgZ(1,"div",25),y._UZ(2,"mat-icon",26),y.TgZ(3,"div",27),y._uU(4),y.qZA(),y.qZA(),y.BQk()),2&t){const t=y.oxw(2);y.xp6(2),y.Q6J("svgIcon","heroicons_outline:office-building"),y.xp6(2),y.Oqu(t.contact.company)}}function bt(t,e){if(1&t&&(y.TgZ(0,"div",33),y.TgZ(1,"span",34),y._uU(2,"\u2022"),y.qZA(),y.TgZ(3,"span",35),y._uU(4),y.qZA(),y.qZA()),2&t){const t=y.oxw().$implicit;y.xp6(4),y.Oqu(t.label)}}function Tt(t,e){if(1&t&&(y.ynx(0),y.TgZ(1,"div",30),y.TgZ(2,"a",31),y._uU(3),y.qZA(),y.YNc(4,bt,5,1,"div",32),y.qZA(),y.BQk()),2&t){const t=e.$implicit;y.xp6(2),y.Q6J("href","mailto:"+t.email,y.LSH),y.xp6(1),y.hij(" ",t.email," "),y.xp6(1),y.Q6J("ngIf",t.label)}}function yt(t,e){if(1&t&&(y.ynx(0),y.TgZ(1,"div",28),y._UZ(2,"mat-icon",26),y.TgZ(3,"div",29),y.YNc(4,Tt,5,3,"ng-container",22),y.qZA(),y.qZA(),y.BQk()),2&t){const t=y.oxw(2);y.xp6(2),y.Q6J("svgIcon","heroicons_outline:mail"),y.xp6(2),y.Q6J("ngForOf",t.contact.emails)("ngForTrackBy",t.trackByFn)}}function kt(t,e){if(1&t&&(y.TgZ(0,"div",33),y.TgZ(1,"span",34),y._uU(2,"\u2022"),y.qZA(),y.TgZ(3,"span",35),y._uU(4),y.qZA(),y.qZA()),2&t){const t=y.oxw().$implicit;y.xp6(4),y.Oqu(t.label)}}function At(t,e){if(1&t&&(y.ynx(0),y.TgZ(1,"div",30),y._UZ(2,"div",36),y.TgZ(3,"div",37),y._uU(4),y.qZA(),y.TgZ(5,"div",38),y._uU(6),y.qZA(),y.YNc(7,kt,5,1,"div",32),y.qZA(),y.BQk()),2&t){const t=e.$implicit,n=y.oxw(3);y.xp6(2),y.Udp("background","url('/assets/images/apps/contacts/flags.png') no-repeat 0 0")("background-size","24px 3876px")("background-position",n.getCountryByIso(t.country).flagImagePos),y.Q6J("matTooltip",n.getCountryByIso(t.country).name),y.xp6(2),y.Oqu(n.getCountryByIso(t.country).code),y.xp6(2),y.Oqu(t.phoneNumber),y.xp6(1),y.Q6J("ngIf",t.label)}}function wt(t,e){if(1&t&&(y.ynx(0),y.TgZ(1,"div",28),y._UZ(2,"mat-icon",26),y.TgZ(3,"div",29),y.YNc(4,At,8,10,"ng-container",22),y.qZA(),y.qZA(),y.BQk()),2&t){const t=y.oxw(2);y.xp6(2),y.Q6J("svgIcon","heroicons_outline:phone"),y.xp6(2),y.Q6J("ngForOf",t.contact.phoneNumbers)("ngForTrackBy",t.trackByFn)}}function qt(t,e){if(1&t&&(y.ynx(0),y.TgZ(1,"div",25),y._UZ(2,"mat-icon",26),y.TgZ(3,"div",27),y._uU(4),y.qZA(),y.qZA(),y.BQk()),2&t){const t=y.oxw(2);y.xp6(2),y.Q6J("svgIcon","heroicons_outline:location-marker"),y.xp6(2),y.Oqu(t.contact.address)}}function Ct(t,e){if(1&t&&(y.ynx(0),y.TgZ(1,"div",25),y._UZ(2,"mat-icon",26),y.TgZ(3,"div",27),y._uU(4),y.ALo(5,"date"),y.qZA(),y.qZA(),y.BQk()),2&t){const t=y.oxw(2);y.xp6(2),y.Q6J("svgIcon","heroicons_outline:cake"),y.xp6(2),y.Oqu(y.xi3(5,2,t.contact.birthday,"longDate"))}}function Qt(t,e){if(1&t&&(y.ynx(0),y.TgZ(1,"div",28),y._UZ(2,"mat-icon",26),y._UZ(3,"div",39),y.qZA(),y.BQk()),2&t){const t=y.oxw(2);y.xp6(2),y.Q6J("svgIcon","heroicons_outline:menu-alt-2"),y.xp6(1),y.Q6J("innerHTML",t.contact.notes,y.oJD)}}const Jt=function(){return["../"]};function It(t,e){if(1&t){const t=y.EpF();y.ynx(0),y.TgZ(1,"div",2),y.YNc(2,mt,2,1,"ng-container",1),y.TgZ(3,"div",3),y.TgZ(4,"button",4),y._UZ(5,"mat-icon",5),y.qZA(),y.qZA(),y.qZA(),y.TgZ(6,"div",6),y.TgZ(7,"div",7),y.TgZ(8,"div",8),y.TgZ(9,"div",9),y.YNc(10,ft,1,1,"img",10),y.YNc(11,ht,2,1,"div",11),y.qZA(),y.TgZ(12,"div",12),y.TgZ(13,"button",13),y.NdJ("click",function(){return y.CHM(t),y.oxw().toggleEditMode(!0)}),y._UZ(14,"mat-icon",14),y.TgZ(15,"span",15),y._uU(16,"Edit"),y.qZA(),y.qZA(),y.qZA(),y.qZA(),y.TgZ(17,"div",16),y._uU(18),y.qZA(),y.YNc(19,Zt,4,6,"ng-container",1),y.TgZ(20,"div",17),y.YNc(21,vt,5,2,"ng-container",1),y.YNc(22,_t,5,2,"ng-container",1),y.YNc(23,yt,5,3,"ng-container",1),y.YNc(24,wt,5,3,"ng-container",1),y.YNc(25,qt,5,2,"ng-container",1),y.YNc(26,Ct,6,5,"ng-container",1),y.YNc(27,Qt,4,2,"ng-container",1),y.qZA(),y.qZA(),y.qZA(),y.BQk()}if(2&t){const t=y.oxw();y.xp6(2),y.Q6J("ngIf",t.contact.background),y.xp6(2),y.Q6J("matTooltip","Close")("routerLink",y.DdM(16,Jt)),y.xp6(1),y.Q6J("svgIcon","heroicons_outline:x"),y.xp6(5),y.Q6J("ngIf",t.contact.avatar),y.xp6(1),y.Q6J("ngIf",!t.contact.avatar),y.xp6(3),y.Q6J("svgIcon","heroicons_solid:pencil-alt"),y.xp6(4),y.Oqu(t.contact.name),y.xp6(1),y.Q6J("ngIf",t.contact.tags.length),y.xp6(2),y.Q6J("ngIf",t.contact.title),y.xp6(1),y.Q6J("ngIf",t.contact.company),y.xp6(1),y.Q6J("ngIf",t.contact.emails.length),y.xp6(1),y.Q6J("ngIf",t.contact.phoneNumbers.length),y.xp6(1),y.Q6J("ngIf",t.contact.address),y.xp6(1),y.Q6J("ngIf",t.contact.birthday),y.xp6(1),y.Q6J("ngIf",t.contact.notes)}}function Ut(t,e){if(1&t&&(y.ynx(0),y._UZ(1,"img",18),y.BQk()),2&t){const t=y.oxw(2);y.xp6(1),y.Q6J("src",t.contact.background,y.LSH)}}function Ft(t,e){if(1&t&&y._UZ(0,"img",19),2&t){const t=y.oxw(2);y.Q6J("src",t.contact.avatar,y.LSH)}}function Nt(t,e){if(1&t&&(y.TgZ(0,"div",20),y._uU(1),y.qZA()),2&t){const t=y.oxw(2);y.xp6(1),y.hij(" ",t.contact.name.charAt(0)," ")}}function Bt(t,e){if(1&t&&(y.ynx(0),y.TgZ(1,"div",70),y.TgZ(2,"span",71),y._uU(3),y.qZA(),y.qZA(),y.BQk()),2&t){const t=e.$implicit;y.xp6(3),y.Oqu(t.title)}}function Yt(t,e){if(1&t&&(y.ynx(0),y.YNc(1,Bt,4,1,"ng-container",22),y.ALo(2,"fuseFindByKey"),y.BQk()),2&t){const t=y.oxw(2);y.xp6(1),y.Q6J("ngForOf",y.Dn7(2,2,t.contact.tags,"id",t.tags))("ngForTrackBy",t.trackByFn)}}function Mt(t,e){1&t&&(y.ynx(0),y._UZ(1,"mat-icon",14),y.TgZ(2,"span",72),y._uU(3,"Edit"),y.qZA(),y.BQk()),2&t&&(y.xp6(1),y.Q6J("svgIcon","heroicons_solid:pencil-alt"))}function Rt(t,e){1&t&&(y.ynx(0),y._UZ(1,"mat-icon",14),y.TgZ(2,"span",72),y._uU(3,"Add"),y.qZA(),y.BQk()),2&t&&(y.xp6(1),y.Q6J("svgIcon","heroicons_solid:plus-circle"))}function Ot(t,e){1&t&&y._UZ(0,"mat-icon",14),2&t&&y.Q6J("svgIcon","heroicons_solid:pencil-alt")}function Dt(t,e){1&t&&y._UZ(0,"mat-icon",14),2&t&&y.Q6J("svgIcon","heroicons_solid:check")}function Lt(t,e){if(1&t){const t=y.EpF();y.ynx(0),y.TgZ(1,"div",82),y.NdJ("click",function(){const e=y.CHM(t).$implicit;return y.oxw(4).toggleContactTag(e)}),y._UZ(2,"mat-checkbox",83),y.TgZ(3,"div",84),y._uU(4),y.qZA(),y.qZA(),y.BQk()}if(2&t){const t=e.$implicit,n=y.oxw(4);y.xp6(2),y.Q6J("checked",n.contact.tags.includes(t.id))("color","primary")("disableRipple",!0),y.xp6(2),y.Oqu(t.title)}}function St(t,e){if(1&t&&(y.ynx(0),y.YNc(1,Lt,5,4,"ng-container",22),y.BQk()),2&t){const t=y.oxw(3);y.xp6(1),y.Q6J("ngForOf",t.filteredTags)("ngForTrackBy",t.trackByFn)}}function Et(t,e){if(1&t){const t=y.EpF();y.ynx(0),y.TgZ(1,"div",75),y.TgZ(2,"mat-form-field",86),y.TgZ(3,"input",87),y.NdJ("input",function(e){const n=y.CHM(t).$implicit;return y.oxw(4).updateTagTitle(n,e)}),y.qZA(),y.TgZ(4,"button",88),y.NdJ("click",function(){const e=y.CHM(t).$implicit;return y.oxw(4).deleteTag(e)}),y._UZ(5,"mat-icon",89),y.qZA(),y.qZA(),y.qZA(),y.BQk()}if(2&t){const t=e.$implicit;y.xp6(3),y.Q6J("value",t.title),y.xp6(2),y.Q6J("svgIcon","heroicons_solid:trash")}}function $t(t,e){if(1&t&&(y.ynx(0),y.TgZ(1,"div",85),y.YNc(2,Et,6,2,"ng-container",22),y.qZA(),y.BQk()),2&t){const t=y.oxw(3);y.xp6(2),y.Q6J("ngForOf",t.filteredTags)("ngForTrackBy",t.trackByFn)}}function Pt(t,e){if(1&t){const t=y.EpF();y.TgZ(0,"div",90),y.NdJ("click",function(){y.CHM(t),y.oxw();const e=y.MAs(6);return y.oxw(2).createTag(e.value),e.value=""}),y._UZ(1,"mat-icon",91),y.TgZ(2,"div",92),y._uU(3,'Create "'),y.TgZ(4,"b"),y._uU(5),y.qZA(),y._uU(6,'"'),y.qZA(),y.qZA()}if(2&t){y.oxw();const t=y.MAs(6);y.xp6(1),y.Q6J("svgIcon","heroicons_solid:plus-circle"),y.xp6(4),y.Oqu(t.value)}}function Ht(t,e){if(1&t){const t=y.EpF();y.TgZ(0,"div",73),y.TgZ(1,"div",74),y.TgZ(2,"div",75),y._UZ(3,"mat-icon",14),y.TgZ(4,"div",15),y.TgZ(5,"input",76,77),y.NdJ("input",function(e){return y.CHM(t),y.oxw(2).filterTags(e)})("keydown",function(e){return y.CHM(t),y.oxw(2).filterTagsInputKeyDown(e)}),y.qZA(),y.qZA(),y.qZA(),y.TgZ(7,"button",78),y.NdJ("click",function(){return y.CHM(t),y.oxw(2).toggleTagsEditMode()}),y.YNc(8,Ot,1,1,"mat-icon",79),y.YNc(9,Dt,1,1,"mat-icon",79),y.qZA(),y.qZA(),y.TgZ(10,"div",80),y.YNc(11,St,2,2,"ng-container",1),y.YNc(12,$t,3,2,"ng-container",1),y.YNc(13,Pt,7,2,"div",81),y.qZA(),y.qZA()}if(2&t){const t=y.MAs(6),e=y.oxw(2);y.xp6(3),y.Q6J("svgIcon","heroicons_solid:search"),y.xp6(2),y.Q6J("maxLength",30),y.xp6(3),y.Q6J("ngIf",!e.tagsEditMode),y.xp6(1),y.Q6J("ngIf",e.tagsEditMode),y.xp6(2),y.Q6J("ngIf",!e.tagsEditMode),y.xp6(1),y.Q6J("ngIf",e.tagsEditMode),y.xp6(1),y.Q6J("ngIf",e.shouldShowCreateTagButton(t.value))}}function jt(t,e){1&t&&(y.TgZ(0,"mat-label"),y._uU(1,"Email"),y.qZA())}function zt(t,e){1&t&&(y.TgZ(0,"mat-label"),y._uU(1,"Label"),y.qZA())}const Gt=function(t){return{"mt-6":t}};function Kt(t,e){if(1&t){const t=y.EpF();y.ynx(0),y.TgZ(1,"div",97),y.TgZ(2,"button",98),y.NdJ("click",function(){y.CHM(t);const e=y.oxw().index;return y.oxw(2).removeEmailField(e)}),y._UZ(3,"mat-icon",14),y.qZA(),y.qZA(),y.BQk()}if(2&t){const t=y.oxw().first;y.xp6(1),y.Q6J("ngClass",y.VKq(2,Gt,t)),y.xp6(2),y.Q6J("svgIcon","heroicons_solid:trash")}}function Vt(t,e){if(1&t&&(y.ynx(0),y.TgZ(1,"div",28),y.TgZ(2,"mat-form-field",93),y.YNc(3,jt,2,0,"mat-label",1),y._UZ(4,"mat-icon",51),y._UZ(5,"input",94),y.qZA(),y.TgZ(6,"mat-form-field",95),y.YNc(7,zt,2,0,"mat-label",1),y._UZ(8,"mat-icon",51),y._UZ(9,"input",96),y.qZA(),y.YNc(10,Kt,4,4,"ng-container",1),y.qZA(),y.BQk()),2&t){const t=e.$implicit,n=e.first,o=e.last;y.xp6(3),y.Q6J("ngIf",n),y.xp6(1),y.Q6J("svgIcon","heroicons_solid:mail"),y.xp6(1),y.Q6J("formControl",t.get("email"))("placeholder","Email address")("spellcheck",!1),y.xp6(2),y.Q6J("ngIf",n),y.xp6(1),y.Q6J("svgIcon","heroicons_solid:tag"),y.xp6(1),y.Q6J("formControl",t.get("label"))("placeholder","Label"),y.xp6(1),y.Q6J("ngIf",!(n&&o))}}function Xt(t,e){1&t&&(y.TgZ(0,"mat-label"),y._uU(1,"Phone"),y.qZA())}function Wt(t,e){if(1&t&&(y.ynx(0),y.TgZ(1,"mat-option",103),y.TgZ(2,"span",75),y._UZ(3,"span",104),y.TgZ(4,"span",15),y._uU(5),y.qZA(),y.TgZ(6,"span",105),y._uU(7),y.qZA(),y.qZA(),y.qZA(),y.BQk()),2&t){const t=e.$implicit;y.xp6(1),y.Q6J("value",t.iso),y.xp6(2),y.Udp("background","url('/assets/images/apps/contacts/flags.png') no-repeat 0 0")("background-size","24px 3876px")("background-position",t.flagImagePos),y.xp6(2),y.Oqu(t.name),y.xp6(2),y.Oqu(t.code)}}function te(t,e){1&t&&(y.TgZ(0,"mat-label"),y._uU(1,"Label"),y.qZA())}function ee(t,e){if(1&t){const t=y.EpF();y.ynx(0),y.TgZ(1,"div",97),y.TgZ(2,"button",98),y.NdJ("click",function(){y.CHM(t);const e=y.oxw().index;return y.oxw(2).removePhoneNumberField(e)}),y._UZ(3,"mat-icon",14),y.qZA(),y.qZA(),y.BQk()}if(2&t){const t=y.oxw().first;y.xp6(1),y.Q6J("ngClass",y.VKq(2,Gt,t)),y.xp6(2),y.Q6J("svgIcon","heroicons_solid:trash")}}function ne(t,e){if(1&t&&(y.ynx(0),y.TgZ(1,"div",99),y.TgZ(2,"mat-form-field",93),y.YNc(3,Xt,2,0,"mat-label",1),y._UZ(4,"input",96),y.TgZ(5,"mat-select",100),y.TgZ(6,"mat-select-trigger"),y.TgZ(7,"span",75),y._UZ(8,"span",101),y.TgZ(9,"span",102),y._uU(10),y.qZA(),y.qZA(),y.qZA(),y.YNc(11,Wt,8,9,"ng-container",22),y.qZA(),y.qZA(),y.TgZ(12,"mat-form-field",95),y.YNc(13,te,2,0,"mat-label",1),y._UZ(14,"mat-icon",51),y._UZ(15,"input",96),y.qZA(),y.YNc(16,ee,4,4,"ng-container",1),y.qZA(),y.BQk()),2&t){const t=e.$implicit,n=e.first,o=e.last,i=y.oxw(2);y.xp6(3),y.Q6J("ngIf",n),y.xp6(1),y.Q6J("formControl",t.get("phoneNumber"))("placeholder","Phone"),y.xp6(1),y.Q6J("formControl",t.get("country")),y.xp6(3),y.Udp("background","url('/assets/images/apps/contacts/flags.png') no-repeat 0 0")("background-size","24px 3876px")("background-position",i.getCountryByIso(t.get("country").value).flagImagePos),y.xp6(2),y.Oqu(i.getCountryByIso(t.get("country").value).code),y.xp6(1),y.Q6J("ngForOf",i.countries)("ngForTrackBy",i.trackByFn),y.xp6(2),y.Q6J("ngIf",n),y.xp6(1),y.Q6J("svgIcon","heroicons_solid:tag"),y.xp6(1),y.Q6J("formControl",t.get("label"))("placeholder","Label"),y.xp6(1),y.Q6J("ngIf",!(n&&o))}}function oe(t,e){if(1&t){const t=y.EpF();y.ynx(0),y.TgZ(1,"div",2),y.YNc(2,Ut,2,1,"ng-container",1),y.TgZ(3,"div",3),y.TgZ(4,"button",4),y._UZ(5,"mat-icon",5),y.qZA(),y.qZA(),y.qZA(),y.TgZ(6,"div",40),y.TgZ(7,"div",7),y.TgZ(8,"form",41),y.TgZ(9,"div",8),y.TgZ(10,"div",42),y._UZ(11,"div",43),y.TgZ(12,"div",44),y.TgZ(13,"div"),y.TgZ(14,"input",45,46),y.NdJ("change",function(){y.CHM(t);const e=y.MAs(15);return y.oxw().uploadAvatar(e.files)}),y.qZA(),y.TgZ(16,"label",47),y._UZ(17,"mat-icon",5),y.qZA(),y.qZA(),y.TgZ(18,"div"),y.TgZ(19,"button",48),y.NdJ("click",function(){return y.CHM(t),y.oxw().removeAvatar()}),y._UZ(20,"mat-icon",5),y.qZA(),y.qZA(),y.qZA(),y.YNc(21,Ft,1,1,"img",10),y.YNc(22,Nt,2,1,"div",11),y.qZA(),y.qZA(),y.TgZ(23,"div",49),y.TgZ(24,"mat-form-field",50),y.TgZ(25,"mat-label"),y._uU(26,"Name"),y.qZA(),y._UZ(27,"mat-icon",51),y._UZ(28,"input",52),y.qZA(),y.qZA(),y.TgZ(29,"div",53),y.YNc(30,Yt,3,6,"ng-container",1),y.TgZ(31,"div",54,55),y.NdJ("click",function(){return y.CHM(t),y.oxw().openTagsPanel()}),y.YNc(33,Mt,4,1,"ng-container",1),y.YNc(34,Rt,4,1,"ng-container",1),y.YNc(35,Ht,14,7,"ng-template",null,56,y.W1O),y.qZA(),y.qZA(),y.TgZ(37,"div",49),y.TgZ(38,"mat-form-field",50),y.TgZ(39,"mat-label"),y._uU(40,"Title"),y.qZA(),y._UZ(41,"mat-icon",51),y._UZ(42,"input",57),y.qZA(),y.qZA(),y.TgZ(43,"div",49),y.TgZ(44,"mat-form-field",50),y.TgZ(45,"mat-label"),y._uU(46,"Company"),y.qZA(),y._UZ(47,"mat-icon",51),y._UZ(48,"input",57),y.qZA(),y.qZA(),y.TgZ(49,"div",49),y.TgZ(50,"div",58),y.YNc(51,Vt,11,10,"ng-container",22),y.qZA(),y.TgZ(52,"div",59),y.NdJ("click",function(){return y.CHM(t),y.oxw().addEmailField()}),y._UZ(53,"mat-icon",14),y.TgZ(54,"span",60),y._uU(55,"Add an email address"),y.qZA(),y.qZA(),y.qZA(),y.TgZ(56,"div",49),y.TgZ(57,"div",58),y.YNc(58,ne,17,18,"ng-container",22),y.qZA(),y.TgZ(59,"div",59),y.NdJ("click",function(){return y.CHM(t),y.oxw().addPhoneNumberField()}),y._UZ(60,"mat-icon",14),y.TgZ(61,"span",60),y._uU(62,"Add a phone number"),y.qZA(),y.qZA(),y.qZA(),y.TgZ(63,"div",49),y.TgZ(64,"mat-form-field",50),y.TgZ(65,"mat-label"),y._uU(66,"Address"),y.qZA(),y._UZ(67,"mat-icon",51),y._UZ(68,"input",57),y.qZA(),y.qZA(),y.TgZ(69,"div",49),y.TgZ(70,"mat-form-field",50),y.TgZ(71,"mat-label"),y._uU(72,"Birthday"),y.qZA(),y._UZ(73,"mat-icon",51),y._UZ(74,"input",61),y._UZ(75,"mat-datepicker-toggle",62),y._UZ(76,"mat-datepicker",null,63),y.qZA(),y.qZA(),y.TgZ(78,"div",49),y.TgZ(79,"mat-form-field",64),y.TgZ(80,"mat-label"),y._uU(81,"Notes"),y.qZA(),y._UZ(82,"mat-icon",51),y._UZ(83,"textarea",65),y.qZA(),y.qZA(),y.TgZ(84,"div",66),y.TgZ(85,"button",67),y.NdJ("click",function(){return y.CHM(t),y.oxw().deleteContact()}),y._uU(86," Delete "),y.qZA(),y.TgZ(87,"button",68),y.NdJ("click",function(){return y.CHM(t),y.oxw().toggleEditMode(!1)}),y._uU(88," Cancel "),y.qZA(),y.TgZ(89,"button",69),y.NdJ("click",function(){return y.CHM(t),y.oxw().updateContact()}),y._uU(90," Save "),y.qZA(),y.qZA(),y.qZA(),y.qZA(),y.qZA(),y.BQk()}if(2&t){const t=y.MAs(77),e=y.oxw();y.xp6(2),y.Q6J("ngIf",e.contact.background),y.xp6(2),y.Q6J("matTooltip","Close")("routerLink",y.DdM(49,Jt)),y.xp6(1),y.Q6J("svgIcon","heroicons_outline:x"),y.xp6(3),y.Q6J("formGroup",e.contactForm),y.xp6(6),y.Q6J("multiple",!1)("accept","image/jpeg, image/png"),y.xp6(3),y.Q6J("svgIcon","heroicons_outline:camera"),y.xp6(3),y.Q6J("svgIcon","heroicons_outline:trash"),y.xp6(1),y.Q6J("ngIf",e.contact.avatar),y.xp6(1),y.Q6J("ngIf",!e.contact.avatar),y.xp6(5),y.Q6J("svgIcon","heroicons_solid:user-circle"),y.xp6(1),y.Q6J("formControlName","name")("placeholder","Name")("spellcheck",!1),y.xp6(2),y.Q6J("ngIf",e.contact.tags.length),y.xp6(3),y.Q6J("ngIf",e.contact.tags.length),y.xp6(1),y.Q6J("ngIf",!e.contact.tags.length),y.xp6(7),y.Q6J("svgIcon","heroicons_solid:briefcase"),y.xp6(1),y.Q6J("formControlName","title")("placeholder","Job title"),y.xp6(5),y.Q6J("svgIcon","heroicons_solid:office-building"),y.xp6(1),y.Q6J("formControlName","company")("placeholder","Company"),y.xp6(3),y.Q6J("ngForOf",e.contactForm.get("emails").controls)("ngForTrackBy",e.trackByFn),y.xp6(2),y.Q6J("svgIcon","heroicons_solid:plus-circle"),y.xp6(5),y.Q6J("ngForOf",e.contactForm.get("phoneNumbers").controls)("ngForTrackBy",e.trackByFn),y.xp6(2),y.Q6J("svgIcon","heroicons_solid:plus-circle"),y.xp6(7),y.Q6J("svgIcon","heroicons_solid:location-marker"),y.xp6(1),y.Q6J("formControlName","address")("placeholder","Address"),y.xp6(5),y.Q6J("svgIcon","heroicons_solid:cake"),y.xp6(1),y.Q6J("matDatepicker",t)("formControlName","birthday")("placeholder","Birthday"),y.xp6(1),y.Q6J("for",t),y.xp6(7),y.Q6J("svgIcon","heroicons_solid:menu-alt-2"),y.xp6(1),y.Q6J("formControlName","notes")("placeholder","Notes")("rows",5)("spellcheck",!1),y.xp6(2),y.Q6J("color","warn")("matTooltip","Delete"),y.xp6(2),y.Q6J("matTooltip","Cancel"),y.xp6(2),y.Q6J("color","primary")("disabled",e.contactForm.invalid)("matTooltip","Save")}}const ie=[{path:"",component:D,resolve:{tags:O},children:[{path:"",component:ct,resolve:{tasks:Y,countries:R},children:[{path:":id",component:(()=>{class t{constructor(t,e,n,o,i,c,a,r,s,l){this._activatedRoute=t,this._changeDetectorRef=e,this._contactsListComponent=n,this._contactsService=o,this._formBuilder=i,this._fuseConfirmationService=c,this._renderer2=a,this._router=r,this._overlay=s,this._viewContainerRef=l,this.editMode=!1,this.tagsEditMode=!1,this._unsubscribeAll=new E.xQ}ngOnInit(){this._contactsListComponent.matDrawer.open(),this.contactForm=this._formBuilder.group({id:[""],avatar:[null],name:["",[S.kI.required]],emails:this._formBuilder.array([]),phoneNumbers:this._formBuilder.array([]),title:[""],company:[""],birthday:[null],address:[null],notes:[null],tags:[[]]}),this._contactsService.contacts$.pipe((0,P.R)(this._unsubscribeAll)).subscribe(t=>{this.contacts=t,this._changeDetectorRef.markForCheck()}),this._contactsService.contact$.pipe((0,P.R)(this._unsubscribeAll)).subscribe(t=>{this._contactsListComponent.matDrawer.open(),this.contact=t,this.contactForm.get("emails").clear(),this.contactForm.get("phoneNumbers").clear(),this.contactForm.patchValue(t);const e=[];t.emails.length>0?t.emails.forEach(t=>{e.push(this._formBuilder.group({email:[t.email],label:[t.label]}))}):e.push(this._formBuilder.group({email:[""],label:[""]})),e.forEach(t=>{this.contactForm.get("emails").push(t)});const n=[];t.phoneNumbers.length>0?t.phoneNumbers.forEach(t=>{n.push(this._formBuilder.group({country:[t.country],phoneNumber:[t.phoneNumber],label:[t.label]}))}):n.push(this._formBuilder.group({country:["us"],phoneNumber:[""],label:[""]})),n.forEach(t=>{this.contactForm.get("phoneNumbers").push(t)}),this.toggleEditMode(!1),this._changeDetectorRef.markForCheck()}),this._contactsService.countries$.pipe((0,P.R)(this._unsubscribeAll)).subscribe(t=>{this.countries=t,this._changeDetectorRef.markForCheck()}),this._contactsService.tags$.pipe((0,P.R)(this._unsubscribeAll)).subscribe(t=>{this.tags=t,this.filteredTags=t,this._changeDetectorRef.markForCheck()})}ngOnDestroy(){this._unsubscribeAll.next(),this._unsubscribeAll.complete(),this._tagsPanelOverlayRef&&this._tagsPanelOverlayRef.dispose()}closeDrawer(){return this._contactsListComponent.matDrawer.close()}toggleEditMode(t=null){this.editMode=null===t?!this.editMode:t,this._changeDetectorRef.markForCheck()}updateContact(){const t=this.contactForm.getRawValue();t.emails=t.emails.filter(t=>t.email),t.phoneNumbers=t.phoneNumbers.filter(t=>t.phoneNumber),this._contactsService.updateContact(t.id,t).subscribe(()=>{this.toggleEditMode(!1)})}deleteContact(){this._fuseConfirmationService.open({title:"Delete contact",message:"Are you sure you want to delete this contact? This action cannot be undone!",actions:{confirm:{label:"Delete"}}}).afterClosed().subscribe(t=>{if("confirmed"===t){const t=this.contact.id,e=this.contacts.findIndex(e=>e.id===t),n=e+(e===this.contacts.length-1?-1:1),o=1===this.contacts.length&&this.contacts[0].id===t?null:this.contacts[n].id;this._contactsService.deleteContact(t).subscribe(t=>{!t||(this._router.navigate(o?["../",o]:["../"],{relativeTo:this._activatedRoute}),this.toggleEditMode(!1))}),this._changeDetectorRef.markForCheck()}})}uploadAvatar(t){if(!t.length)return;const e=t[0];!["image/jpeg","image/png"].includes(e.type)||this._contactsService.uploadAvatar(this.contact.id,e).subscribe()}removeAvatar(){this.contactForm.get("avatar").setValue(null),this._avatarFileInput.nativeElement.value=null,this.contact.avatar=null}openTagsPanel(){this._tagsPanelOverlayRef=this._overlay.create({backdropClass:"",hasBackdrop:!0,scrollStrategy:this._overlay.scrollStrategies.block(),positionStrategy:this._overlay.position().flexibleConnectedTo(this._tagsPanelOrigin.nativeElement).withFlexibleDimensions(!0).withViewportMargin(64).withLockedPosition(!0).withPositions([{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"}])}),this._tagsPanelOverlayRef.attachments().subscribe(()=>{this._renderer2.addClass(this._tagsPanelOrigin.nativeElement,"panel-opened"),this._tagsPanelOverlayRef.overlayElement.querySelector("input").focus()});const t=new at.UE(this._tagsPanel,this._viewContainerRef);this._tagsPanelOverlayRef.attach(t),this._tagsPanelOverlayRef.backdropClick().subscribe(()=>{this._renderer2.removeClass(this._tagsPanelOrigin.nativeElement,"panel-opened"),this._tagsPanelOverlayRef&&this._tagsPanelOverlayRef.hasAttached()&&(this._tagsPanelOverlayRef.detach(),this.filteredTags=this.tags,this.tagsEditMode=!1),t&&t.isAttached&&t.detach()})}toggleTagsEditMode(){this.tagsEditMode=!this.tagsEditMode}filterTags(t){const e=t.target.value.toLowerCase();this.filteredTags=this.tags.filter(t=>t.title.toLowerCase().includes(e))}filterTagsInputKeyDown(t){if("Enter"!==t.key)return;if(0===this.filteredTags.length)return this.createTag(t.target.value),void(t.target.value="");const e=this.filteredTags[0];this.contact.tags.find(t=>t===e.id)?this.removeTagFromContact(e):this.addTagToContact(e)}createTag(t){this._contactsService.createTag({title:t}).subscribe(t=>{this.addTagToContact(t)})}updateTagTitle(t,e){t.title=e.target.value,this._contactsService.updateTag(t.id,t).pipe((0,rt.b)(300)).subscribe(),this._changeDetectorRef.markForCheck()}deleteTag(t){this._contactsService.deleteTag(t.id).subscribe(),this._changeDetectorRef.markForCheck()}addTagToContact(t){this.contact.tags.unshift(t.id),this.contactForm.get("tags").patchValue(this.contact.tags),this._changeDetectorRef.markForCheck()}removeTagFromContact(t){this.contact.tags.splice(this.contact.tags.findIndex(e=>e===t.id),1),this.contactForm.get("tags").patchValue(this.contact.tags),this._changeDetectorRef.markForCheck()}toggleContactTag(t){this.contact.tags.includes(t.id)?this.removeTagFromContact(t):this.addTagToContact(t)}shouldShowCreateTagButton(t){return!(""===t||this.tags.findIndex(e=>e.title.toLowerCase()===t.toLowerCase())>-1)}addEmailField(){const t=this._formBuilder.group({email:[""],label:[""]});this.contactForm.get("emails").push(t),this._changeDetectorRef.markForCheck()}removeEmailField(t){this.contactForm.get("emails").removeAt(t),this._changeDetectorRef.markForCheck()}addPhoneNumberField(){const t=this._formBuilder.group({country:["us"],phoneNumber:[""],label:[""]});this.contactForm.get("phoneNumbers").push(t),this._changeDetectorRef.markForCheck()}removePhoneNumberField(t){this.contactForm.get("phoneNumbers").removeAt(t),this._changeDetectorRef.markForCheck()}getCountryByIso(t){return this.countries.find(e=>e.iso===t)}trackByFn(t,e){return e.id||t}}return t.\u0275fac=function(e){return new(e||t)(y.Y36(o.gz),y.Y36(y.sBO),y.Y36(ct),y.Y36(B),y.Y36(S.qu),y.Y36(st.R),y.Y36(y.Qsj),y.Y36(o.F0),y.Y36(lt.aV),y.Y36(y.s_b))},t.\u0275cmp=y.Xpm({type:t,selectors:[["contacts-details"]],viewQuery:function(t,e){if(1&t&&(y.Gf(gt,5),y.Gf(pt,5),y.Gf(dt,5)),2&t){let t;y.iGM(t=y.CRH())&&(e._avatarFileInput=t.first),y.iGM(t=y.CRH())&&(e._tagsPanel=t.first),y.iGM(t=y.CRH())&&(e._tagsPanelOrigin=t.first)}},decls:3,vars:2,consts:[[1,"flex","flex-col","w-full"],[4,"ngIf"],[1,"relative","w-full","h-40","sm:h-48","px-8","sm:px-12","bg-accent-100","dark:bg-accent-700"],[1,"flex","items-center","justify-end","w-full","max-w-3xl","mx-auto","pt-6"],["mat-icon-button","",3,"matTooltip","routerLink"],[1,"text-white",3,"svgIcon"],[1,"relative","flex","flex-col","flex-auto","items-center","p-6","pt-0","sm:p-12","sm:pt-0"],[1,"w-full","max-w-3xl"],[1,"flex","flex-auto","items-end","-mt-16"],[1,"flex","items-center","justify-center","w-32","h-32","rounded-full","overflow-hidden","ring-4","ring-bg-card"],["class","object-cover w-full h-full",3,"src",4,"ngIf"],["class","flex items-center justify-center w-full h-full rounded overflow-hidden uppercase text-8xl font-bold leading-none bg-gray-200 text-gray-600 dark:bg-gray-700 dark:text-gray-200",4,"ngIf"],[1,"flex","items-center","ml-auto","mb-1"],["mat-stroked-button","",3,"click"],[1,"icon-size-5",3,"svgIcon"],[1,"ml-2"],[1,"mt-3","text-4xl","font-bold","truncate"],[1,"flex","flex-col","mt-4","pt-6","border-t","space-y-8"],[1,"absolute","inset-0","object-cover","w-full","h-full",3,"src"],[1,"object-cover","w-full","h-full",3,"src"],[1,"flex","items-center","justify-center","w-full","h-full","rounded","overflow-hidden","uppercase","text-8xl","font-bold","leading-none","bg-gray-200","text-gray-600","dark:bg-gray-700","dark:text-gray-200"],[1,"flex","flex-wrap","items-center","mt-2"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"flex","items-center","justify-center","py-1","px-3","mr-3","mb-3","rounded-full","leading-normal","text-gray-500","bg-gray-100","dark:text-gray-300","dark:bg-gray-700"],[1,"text-sm","font-medium","whitespace-nowrap"],[1,"flex","sm:items-center"],[3,"svgIcon"],[1,"ml-6","leading-6"],[1,"flex"],[1,"min-w-0","ml-6","space-y-1"],[1,"flex","items-center","leading-6"],["target","_blank",1,"hover:underline","text-primary-500",3,"href"],["class","text-md truncate text-secondary",4,"ngIf"],[1,"text-md","truncate","text-secondary"],[1,"mx-2"],[1,"font-medium"],[1,"hidden","sm:flex","w-6","h-4","overflow-hidden",3,"matTooltip"],[1,"sm:ml-3","font-mono"],[1,"ml-2.5","font-mono"],[1,"max-w-none","ml-6","prose","prose-sm",3,"innerHTML"],[1,"relative","flex","flex-col","flex-auto","items-center","px-6","sm:px-12"],[3,"formGroup"],[1,"relative","flex","items-center","justify-center","w-32","h-32","rounded-full","overflow-hidden","ring-4","ring-bg-card"],[1,"absolute","inset-0","bg-black","bg-opacity-50","z-10"],[1,"absolute","inset-0","flex","items-center","justify-center","z-20"],["id","avatar-file-input","type","file",1,"absolute","h-0","w-0","opacity-0","invisible","pointer-events-none",3,"multiple","accept","change"],["avatarFileInput",""],["for","avatar-file-input","matRipple","",1,"flex","items-center","justify-center","w-10","h-10","rounded-full","cursor-pointer","hover:bg-hover"],["mat-icon-button","",3,"click"],[1,"mt-8"],[1,"fuse-mat-no-subscript","w-full"],["matPrefix","",1,"hidden","sm:flex","icon-size-5",3,"svgIcon"],["matInput","",3,"formControlName","placeholder","spellcheck"],[1,"flex","flex-wrap","items-center","-m-1.5","mt-6"],[1,"flex","items-center","justify-center","px-4","m-1.5","rounded-full","leading-9","cursor-pointer","text-gray-500","bg-gray-100","dark:text-gray-300","dark:bg-gray-700",3,"click"],["tagsPanelOrigin",""],["tagsPanel",""],["matInput","",3,"formControlName","placeholder"],[1,"space-y-4"],[1,"group","inline-flex","items-center","mt-2","-ml-4","py-2","px-4","rounded","cursor-pointer",3,"click"],[1,"ml-2","font-medium","text-secondary","group-hover:underline"],["matInput","",3,"matDatepicker","formControlName","placeholder"],["matSuffix","",3,"for"],["birthdayDatepicker",""],[1,"fuse-mat-textarea","fuse-mat-no-subscript","w-full"],["matInput","","matTextareaAutosize","",3,"formControlName","placeholder","rows","spellcheck"],[1,"flex","items-center","mt-10","-mx-6","sm:-mx-12","py-4","pr-4","pl-1","sm:pr-12","sm:pl-7","border-t","bg-gray-50","dark:bg-transparent"],["mat-button","",3,"color","matTooltip","click"],["mat-button","",1,"ml-auto",3,"matTooltip","click"],["mat-flat-button","",1,"ml-2",3,"color","disabled","matTooltip","click"],[1,"flex","items-center","justify-center","px-4","m-1.5","rounded-full","leading-9","text-gray-500","bg-gray-100","dark:text-gray-300","dark:bg-gray-700"],[1,"text-md","font-medium","whitespace-nowrap"],[1,"ml-1.5","text-md","font-medium","whitespace-nowrap"],[1,"w-60","rounded","border","shadow-md","bg-card"],[1,"flex","items-center","m-3","mr-2"],[1,"flex","items-center"],["type","text","placeholder","Enter tag name",1,"w-full","min-w-0","py-1","border-0",3,"maxLength","input","keydown"],["newTagInput",""],["mat-icon-button","",1,"ml-1",3,"click"],["class","icon-size-5",3,"svgIcon",4,"ngIf"],[1,"flex","flex-col","max-h-64","py-2","border-t","overflow-y-auto"],["class","flex items-center h-10 min-h-10 -ml-0.5 pl-4 pr-3 leading-none cursor-pointer hover:bg-hover","matRipple","",3,"click",4,"ngIf"],["matRipple","",1,"flex","items-center","h-10","min-h-10","px-4","cursor-pointer","hover:bg-hover",3,"click"],[1,"flex","items-center","h-10","min-h-10","pointer-events-none",3,"checked","color","disableRipple"],[1,"ml-1"],[1,"py-2","space-y-2"],[1,"fuse-mat-dense","fuse-mat-no-subscript","w-full","mx-4"],["matInput","",3,"value","input"],["mat-icon-button","","matSuffix","",3,"click"],[1,"icon-size-5","ml-2",3,"svgIcon"],["matRipple","",1,"flex","items-center","h-10","min-h-10","-ml-0.5","pl-4","pr-3","leading-none","cursor-pointer","hover:bg-hover",3,"click"],[1,"mr-2","icon-size-5",3,"svgIcon"],[1,"break-all"],[1,"fuse-mat-no-subscript","flex-auto"],["matInput","",3,"formControl","placeholder","spellcheck"],[1,"fuse-mat-no-subscript","flex-auto","w-full","max-w-24","sm:max-w-40","ml-2","sm:ml-4"],["matInput","",3,"formControl","placeholder"],[1,"flex","items-center","w-10","pl-2",3,"ngClass"],["mat-icon-button","","matTooltip","Remove",1,"w-8","h-8","min-h-8",3,"click"],[1,"relative","flex"],["matPrefix","",1,"mr-1.5",3,"formControl"],[1,"hidden","sm:flex","w-6","h-4","mr-1","overflow-hidden"],[1,"sm:mx-0.5","font-medium","text-default"],[3,"value"],[1,"w-6","h-4","overflow-hidden"],[1,"ml-2","font-medium"]],template:function(t,e){1&t&&(y.TgZ(0,"div",0),y.YNc(1,It,28,17,"ng-container",1),y.YNc(2,oe,91,50,"ng-container",1),y.qZA()),2&t&&(y.xp6(1),y.Q6J("ngIf",!e.editMode),y.xp6(1),y.Q6J("ngIf",e.editMode))},directives:[L.O5,i.lW,v.gM,o.rH,u.Hw,L.sg,S._Y,S.JL,S.sg,a.wG,l.KE,l.hX,l.qo,g.Nt,S.Fj,S.JJ,S.u,r.hl,r.nW,l.R9,r.Mq,g.D7,c.oG,S.oH,L.mk,h.gD,h.$L,a.ey],pipes:[ut.K,L.uU],encapsulation:2,changeDetection:0}),t})(),resolve:{task:M,countries:R},canDeactivate:[k]}]}]}];let ce=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=y.oAB({type:t}),t.\u0275inj=y.cJS({providers:[{provide:a.sG,useValue:{parse:{dateInput:_.ISO_8601},display:{dateInput:"LL",monthYearLabel:"MMM YYYY",dateA11yLabel:"LL",monthYearA11yLabel:"MMMM YYYY"}}}],imports:[[o.Bz.forChild(ie),i.ot,c.p9,r.FA,s.t,l.lN,u.Ps,g.c,p.Tx,d.Yd,m.Cv,f.Fk,a.si,h.LD,x.SJ,Z.p0,v.AV,b.V,T.m]]}),t})()}}]);