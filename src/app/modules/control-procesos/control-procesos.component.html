<!-- <main-layouts></main-layouts> -->
<mat-sidenav-container>
            <!-- Outlet para rutas hijas si aplica -->
            <router-outlet *ngIf="true"></router-outlet>
            <mat-sidenav-content>
                <!-- Grupo de pestañas para las operaciones de Utilitarios -->
                <mat-tab-group class="mat-tab-group flex items-center w-screen" [(selectedIndex)]="selectedTabIndex"
                    (selectedTabChange)="onTabChange($event)">

                    <!-- Pestaña de Búsqueda de jornadas activas -->
                    <mat-tab label="Búsqueda">
                        <div class="main-container mt-5 flex flex-col md:w-screen items-center px-2 md:px-0">
                            <!-- Cabecera de la página -->
                            <div class="header-container flex justify-between w-3/5 mb-5 text-7xl">
                                <span>Consulta de Procesos</span>
                                <div class="icon-container flex flex-col items-center ">
                                    <!-- Icono representativo -->
                                    <mat-icon
                                        class="head-icon icon-size-10 icon-bdv-icon-config-l opacity-40 pt-5"></mat-icon>
                                    <span class="text-head mt-8">Utilitarios</span>
                                </div>
                            </div>
                            <!-- Tarjeta principal con el formulario de búsqueda -->
                            <mat-card class="card-container flex flex-col items-center justify-between p-8 rounded-3xl mb-10">
                                <!-- Título de la tarjeta -->
                                <div class="card-title">
                                    <span>Seleccione Criterios</span>
                                </div>
                                <!-- Formulario de criterios de búsqueda -->
                                <form class="card-form flex items-center w-full" [formGroup]="procesosForm">

                                    <div class="field-container px-6">

                                        
                                        <div class="campos">
                                             <mat-form-field class="w-full field-form" appearance="outline">
                                                <mat-label>Fecha Desde</mat-label>
                                        <input matInput formControlName="fechaDesde" [max]="today"
                                            [matDatepicker]="pickerDesde" readonly>
                                        <mat-icon (click)="pickerDesde.open()"
                                            class="icon-bdv-icon-scheduledit-m date-icon"></mat-icon>
                                        <mat-datepicker #pickerDesde></mat-datepicker>
                                    </mat-form-field>

                                            <mat-form-field class="w-full field-form" appearance="outline">
                                                <mat-label>Fecha Hasta</mat-label>
                                        <input matInput formControlName="fechaHasta" [max]="today"
                                            [min]="procesosForm.get('fechaDesde')?.value"
                                            [matDatepicker]="pickerHasta" readonly>
                                        <mat-icon (click)="pickerHasta.open()"
                                            class="icon-bdv-icon-scheduledit-m date-icon"></mat-icon>
                                        <mat-datepicker #pickerHasta></mat-datepicker>
                                    </mat-form-field>

                                        </div>
                                        <div class="campos">

                                            <div class="usuario">
                                                <mat-form-field appearance="outline" class=" input-usuario">
                                                    <mat-label>Usuario (NM)</mat-label>
                                                    <input  matInput [formControlName]="'nroCedRif'"
                                                        matInput>
                                                </mat-form-field>
                                            </div>

                                            <div class="w-full field-form flex flex-col mb-4">
                                                <label class="mb-1 font-semibold text-base" style="white-space: nowrap;">En Proceso</label>
                                                <mat-checkbox [formControlName]="'enProceso'"></mat-checkbox>
                                            </div>
                                        </div>


                                    </div>
                                </form>
                                <!-- Botones de acción -->
                                <div class="buttons-container flex justify-center gap-6">
                                    <!-- Botón para procesar el archivo cargado -->
                                    <button class="mat-raised-button w-full px-7 py-0" type="submit"
                                        (click)="consultar()">Procesar</button>
                                    <!-- Botón para salir y regresar al menú principal -->
                                    <button class="mat-raised-button w-full px-8 py-0" (click)="inicio()">Salir</button>
                                </div>
                            </mat-card>
                        </div>
                    </mat-tab>

                    <!-- Pestaña de Resultados -->

                    <mat-tab label="Resultado" *ngIf="canViewTab">
    <ng-template matTabContent>
        <div class="main-container2 w-screen">
            <div class="header-container-tab2 flex justify-between px-80 mt-1 text-6xl">
                <span>Consultas / Procesos</span>
                <div class="icon-container flex flex-col items-center ">
                    <mat-icon class="head-icon icon-size-10 icon-bdv-icon-config-l opacity-40 pt-5"></mat-icon>
                    <span class="text-head mt-8">Utilitarios</span>
                </div>
            </div>
            <div class="w-full px-50 mt-10 table-main-container">
                <div class="sm:col-span-12 flex flex-col flex-auto p-6 bg-card shadow rounded-2xl overflow-x-auto mb-30 mx-20">
                    <div class="sm:col-span-16 flex flex-col flex-auto p-6 bg-card shadow rounded-2xl min-w-min">
                        <div class="flex flex-col mt-2 results">
                            <div class="flex items-start justify-between">
                                <mat-form-field appearance="outline" class="input-filter">
                                    <mat-label>Filtro</mat-label>
                                    <input matInput (keyup)="applyFilter($event)" placeholder="" #input>
                                </mat-form-field>
                                <div class="action-buttons">
                                    <button class="mat-raised-button mr-5" (click)="exportarExcel()"
                                        [disabled]="(exportProgressService.showExportProgress$ | async) || (exportProgressService.showExportStart$ | async)">
                                        Exportar Procesos
                                    </button>
                                    <button class="mat-raised-button mr-5" (click)="regresar()">Regresar</button>
                                    <button class="mat-raised-button mr-5" (click)="inicio()">Salir</button>
                                </div>
                            </div>
                            <ng-container *ngIf="(exportProgressService.showExportProgress$ | async) || (exportProgressService.showExportStart$ | async)">
                                <app-export-progress class="w-full mt-10"
                                    [showExportProgress]="exportProgressService.showExportProgress$ | async"
                                    [exportProgress]="exportProgressService.exportProgress$ | async"
                                    [generandoArchivo]="exportProgressService.generandoArchivo$ | async"
                                    [mensajePreparandoDescarga]="exportProgressService.mensajePreparandoDescarga$ | async"
                                    [showExportStart]="exportProgressService.showExportStart$ | async"
                                    [mensajeConexionActual]="exportProgressService.mensajeConexionActual$ | async">
                                </app-export-progress>
                            </ng-container>
                            <!-- Tabla de resultados -->
                            <div class="table-responsive">
                                <table mat-table [dataSource]="dataSourceProcesos" matSort class="table-procesos w-full">
                                    <!-- ID -->
                                    <ng-container matColumnDef="id">
                                        <th mat-header-cell *matHeaderCellDef mat-sort-header class="header-cell">ID</th>
                                        <td mat-cell *matCellDef="let row" class="table-cell">{{ row.id }}</td>
                                    </ng-container>
                                    <!-- Transacción -->
                                    <ng-container matColumnDef="transaccion">
                                        <th mat-header-cell *matHeaderCellDef mat-sort-header class="header-cell">Transacción</th>
                                        <td mat-cell *matCellDef="let row" class="table-cell">{{ row.transaccion }}</td>
                                    </ng-container>
                                    <!-- Fecha Inicio -->
                                    <ng-container matColumnDef="fechaInicio">
                                        <th mat-header-cell *matHeaderCellDef mat-sort-header class="header-cell">Fecha Inicio</th>
                                        <td mat-cell *matCellDef="let row" class="table-cell">{{ row.fechaInicio }}</td>
                                    </ng-container>
                                    <!-- Fecha Fin -->
                                    <ng-container matColumnDef="fechaFin">
                                        <th mat-header-cell *matHeaderCellDef mat-sort-header class="header-cell">Fecha Fin</th>
                                        <td mat-cell *matCellDef="let row" class="table-cell">{{ row.fechaFin }}</td>
                                    </ng-container>
                                    <!-- Error -->
                                    <ng-container matColumnDef="error">
                                        <th mat-header-cell *matHeaderCellDef mat-sort-header class="header-cell">Error</th>
                                        <td mat-cell *matCellDef="let row" class="table-cell">{{ row.error }}</td>
                                    </ng-container>
                                    <!-- Usuario -->
                                    <ng-container matColumnDef="usuario">
                                        <th mat-header-cell *matHeaderCellDef mat-sort-header class="header-cell">Usuario</th>
                                        <td mat-cell *matCellDef="let row" class="table-cell">{{ row.usuario }}</td>
                                    </ng-container>
                                    <!-- Acción -->
                                    <ng-container matColumnDef="accion">
                                        <th mat-header-cell *matHeaderCellDef mat-sort-header class="header-cell">Acción</th>
                                        <td mat-cell *matCellDef="let row" class="table-cell">
                                        </td>
                                    </ng-container>
                                    <!-- Filas de encabezado y datos -->
                                    <tr mat-header-row *matHeaderRowDef="displayedColumnsProcesos"></tr>
                                    <tr mat-row *matRowDef="let row; columns: displayedColumnsProcesos;"></tr>
                                    <!-- Mensaje cuando no hay datos -->
                                    <tr class="mat-row" *matNoDataRow>
                                        <td class="mat-cell text-center" colspan="7">No Existe Resultado</td>
                                    </tr>
                                </table>
                                <!-- Paginador -->
                                <div class="paginator-actions-row flex items-center justify-between">
                                    <mat-paginator *ngIf="dataSourceProcesos.length > 5" [pageSize]="5" [pageSizeOptions]="[5, 10, 25, 100]" [showFirstLastButtons]="true" #paginatorProcesos>
                                    </mat-paginator>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </ng-template>
</mat-tab>

                </mat-tab-group>
            </mat-sidenav-content>
        </mat-sidenav-container>