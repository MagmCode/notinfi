<!-- Loading Bar -->
<fuse-loading-bar></fuse-loading-bar>

<mat-sidenav-container>
    <router-outlet *ngIf="true"></router-outlet>
    <mat-sidenav-content>
        <!-- Contenido -->
        <div class="main-container">
            <div class="card-header">
                <span>Sustitución de Operaciones</span>
                <mat-icon class="icon-size-10 icon-bdv-icon-usdbill-l head-icon-container"></mat-icon>
            </div>

            <mat-card class="card-container">
                <div class="card-title">
                    <span>Seleccione Criterios</span>
                </div>

                <!-- Carga Form -->
                <form class="card-form" [formGroup]="cargaForm">  
                    <!-- file  -->
                    <mat-form-field
                        class="w-full file-browse"
                        appearance="outline"
                        [ngClass]="{'mat-form-field-valid': cargaForm.controls['file'].valid && cargaForm.controls['file'].value}">
                        <mat-label>Archivo</mat-label>
                        <input
                        id="file"
                        matInput
                        [formControlName]="'file'"  
                        [value]="fileName"
                        readonly>
                        <mat-hint>Suba un archivo Excel</mat-hint>
                        <mat-error *ngIf="cargaForm.get('file').hasError('required') && cargaForm.get('file').touched">
                            Debe seleccionar un archivo
                          </mat-error>
                        <mat-error *ngIf="cargaForm.get('file').hasError('invalidFile')">
                            Por favor, sube un archivo Excel válido
                        </mat-error>
                        <mat-icon (click)="fileInput.click()" class="icon-bdv-icon-file2-m file-icon"></mat-icon>
                        <input type="file" #fileInput (change)="onFileSelected($event)" accept=".xls,.xlsx,.xlsm,.xlsb,.xlt,.xltx,.xltm" hidden>
                    </mat-form-field>
                </form>

                 <div class="buttons-container">
                        <button class="mat-raised-button" type="submit" form="cargaForm">Procesar</button>
                        <button class="mat-raised-button" (click)="menuPrincipal()">Salir</button>
                </div>
            </mat-card>
        </div>
    </mat-sidenav-content>
</mat-sidenav-container>